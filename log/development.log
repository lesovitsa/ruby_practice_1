  [1m[35m (120.7ms)[0m  [1m[35mCREATE DATABASE "wogi_app_development" ENCODING = 'unicode'[0m
  [1m[35m (43.8ms)[0m  [1m[35mCREATE DATABASE "wogi_app_test" ENCODING = 'unicode'[0m
  [1m[35m (19.2ms)[0m  [1m[35mDROP DATABASE IF EXISTS "wogi_app_development"[0m
  [1m[35m (19.9ms)[0m  [1m[35mDROP DATABASE IF EXISTS "wogi_app_test"[0m
  [1m[35m (107.1ms)[0m  [1m[35mCREATE DATABASE "wogi_app_development" ENCODING = 'unicode'[0m
  [1m[35m (35.3ms)[0m  [1m[35mCREATE DATABASE "wogi_app_test" ENCODING = 'unicode'[0m
  [1m[35m (13.0ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" character varying NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" character varying NOT NULL PRIMARY KEY, "value" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT pg_try_advisory_lock(745793581222496940)[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Load (1.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::InternalMetadata Create (0.5ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('environment', 'development', '2024-07-24 18:27:54.708179', '2024-07-24 18:27:54.708181') RETURNING "key"[0m
Migrating to UserInfo (20240724182343)
  [1m[35m (0.1ms)[0m  [1m[34mSELECT pg_advisory_unlock(745793581222496940)[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT pg_try_advisory_lock(745793581222496940)[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.4ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
Migrating to UserInfo (20240724182343)
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (5.3ms)[0m  [1m[35mCREATE TABLE "user_info" ("id" bigserial primary key, "name" character varying NOT NULL, "email" character varying NOT NULL)[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.3ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ('20240724182343') RETURNING "version"[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT pg_advisory_unlock(745793581222496940)[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.2ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[35m (5053.2ms)[0m  [1m[35mDROP DATABASE IF EXISTS "wogi_app_development"[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.2ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[35m (5054.9ms)[0m  [1m[35mDROP DATABASE IF EXISTS "wogi_app_development"[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT pg_try_advisory_lock(745793581222496940)[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.2ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[35m (0.0ms)[0m  [1m[34mSELECT pg_advisory_unlock(745793581222496940)[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (93.8ms)[0m  [1m[35mCREATE DATABASE "wogi_app_development" ENCODING = 'unicode'[0m
  [1m[35m (29.3ms)[0m  [1m[35mCREATE DATABASE "wogi_app_test" ENCODING = 'unicode'[0m
  [1m[35m (11.0ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" character varying NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" character varying NOT NULL PRIMARY KEY, "value" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT pg_try_advisory_lock(745793581222496940)[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Load (1.0ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::InternalMetadata Create (0.3ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('environment', 'development', '2024-07-24 18:33:15.629809', '2024-07-24 18:33:15.629810') RETURNING "key"[0m
Migrating to UserInfo (20240724182343)
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (8.9ms)[0m  [1m[35mCREATE TABLE "user_info" ("id" bigserial primary key, "name" character varying NOT NULL, "email" character varying NOT NULL, "user_id" uuid NOT NULL)[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_user_info_on_user_id" ON "user_info" ("user_id")[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.1ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ('20240724182343') RETURNING "version"[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT pg_advisory_unlock(745793581222496940)[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.2ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[35m (5052.4ms)[0m  [1m[35mDROP DATABASE IF EXISTS "wogi_app_development"[0m
  [1m[35m (106.6ms)[0m  [1m[35mCREATE DATABASE "wogi_app_development" ENCODING = 'unicode'[0m
  [1m[35m (39.6ms)[0m  [1m[35mCREATE DATABASE "wogi_app_test" ENCODING = 'unicode'[0m
  [1m[35m (1.5ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" character varying NOT NULL PRIMARY KEY)[0m
  [1m[35m (1.1ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" character varying NOT NULL PRIMARY KEY, "value" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT pg_try_advisory_lock(745793581222496940)[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.2ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::InternalMetadata Create (0.1ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('environment', 'development', '2024-07-24 18:35:23.232668', '2024-07-24 18:35:23.232669') RETURNING "key"[0m
Migrating to UserInfo (20240724182343)
  [1m[35m (0.0ms)[0m  [1m[34mSELECT pg_advisory_unlock(745793581222496940)[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT pg_try_advisory_lock(745793581222496940)[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.2ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
Migrating to UserInfo (20240724182343)
  [1m[35m (0.0ms)[0m  [1m[34mSELECT pg_advisory_unlock(745793581222496940)[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT pg_try_advisory_lock(745793581222496940)[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.8ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
Migrating to UserInfo (20240724182343)
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (4.4ms)[0m  [1m[35mCREATE TABLE "user_info" ("name" character varying NOT NULL, "email" character varying NOT NULL, "user_id" uuid NOT NULL PRIMARY KEY)[0m
  [1m[35m (1.7ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_user_info_on_user_id" ON "user_info" ("user_id")[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.3ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ('20240724182343') RETURNING "version"[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT pg_advisory_unlock(745793581222496940)[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (91.6ms)[0m  [1m[35mCREATE DATABASE "wogi_app_development" ENCODING = 'unicode'[0m
  [1m[35m (27.8ms)[0m  [1m[35mCREATE DATABASE "wogi_app_test" ENCODING = 'unicode'[0m
  [1m[35m (1.5ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" character varying NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" character varying NOT NULL PRIMARY KEY, "value" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT pg_try_advisory_lock(745793581222496940)[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.2ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::InternalMetadata Create (0.1ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('environment', 'development', '2024-07-24 18:39:16.105473', '2024-07-24 18:39:16.105474') RETURNING "key"[0m
Migrating to UserInfo (20240724182343)
  [1m[35m (0.1ms)[0m  [1m[34mSELECT pg_advisory_unlock(745793581222496940)[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT pg_try_advisory_lock(745793581222496940)[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.2ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
Migrating to UserInfo (20240724182343)
  [1m[35m (0.1ms)[0m  [1m[34mSELECT pg_advisory_unlock(745793581222496940)[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT pg_try_advisory_lock(745793581222496940)[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.2ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
Migrating to UserInfo (20240724182343)
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (1.5ms)[0m  [1m[35mCREATE TABLE "user_info" ("name" character varying NOT NULL, "email" character varying NOT NULL, "user_id" uuid NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_user_info_on_email" ON "user_info" ("email")[0m
  [1m[35m (0.2ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_user_info_on_user_id" ON "user_info" ("user_id")[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.3ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ('20240724182343') RETURNING "version"[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT pg_advisory_unlock(745793581222496940)[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (104.4ms)[0m  [1m[35mCREATE DATABASE "wogi_app_development" ENCODING = 'unicode'[0m
  [1m[35m (37.3ms)[0m  [1m[35mCREATE DATABASE "wogi_app_test" ENCODING = 'unicode'[0m
  [1m[35m (3.0ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" character varying NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" character varying NOT NULL PRIMARY KEY, "value" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT pg_try_advisory_lock(745793581222496940)[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.4ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::InternalMetadata Create (0.4ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('environment', 'development', '2024-07-24 19:13:29.265860', '2024-07-24 19:13:29.265861') RETURNING "key"[0m
Migrating to UserInfo (20240724182343)
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (7.0ms)[0m  [1m[35mCREATE TABLE "user_info" ("name" character varying NOT NULL, "email" character varying NOT NULL, "user_id" uuid NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.4ms)[0m  [1m[35mCREATE INDEX "index_user_info_on_user_id" ON "user_info" USING hash ("user_id")[0m
  [1m[35m (0.2ms)[0m  [1m[35mCREATE INDEX "index_user_info_on_email" ON "user_info" USING hash ("email")[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.1ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ('20240724182343') RETURNING "version"[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT[0m
Migrating to BrandInfo (20240724184120)
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (1.1ms)[0m  [1m[35mCREATE TABLE "brand_info" ("name" character varying NOT NULL, "state" character varying NOT NULL, "brand_id" uuid NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE INDEX "index_brand_info_on_brand_id" ON "brand_info" USING hash ("brand_id")[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.0ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ('20240724184120') RETURNING "version"[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT[0m
Migrating to ProductInfo (20240724184522)
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.8ms)[0m  [1m[35mCREATE TABLE "product_info" ("name" character varying NOT NULL, "state" character varying NOT NULL, "product_id" uuid NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.2ms)[0m  [1m[35mCREATE INDEX "index_product_info_on_product_id" ON "product_info" USING hash ("product_id")[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.0ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ('20240724184522') RETURNING "version"[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT[0m
Migrating to BrandProductOwnership (20240724184646)
  [1m[35m (0.0ms)[0m  [1m[34mSELECT pg_advisory_unlock(745793581222496940)[0m
  [1m[35m (89.5ms)[0m  [1m[35mCREATE DATABASE "wogi_app_development" ENCODING = 'unicode'[0m
  [1m[35m (30.1ms)[0m  [1m[35mCREATE DATABASE "wogi_app_test" ENCODING = 'unicode'[0m
  [1m[35m (1.8ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" character varying NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.8ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" character varying NOT NULL PRIMARY KEY, "value" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT pg_try_advisory_lock(745793581222496940)[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.2ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::InternalMetadata Create (0.1ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('environment', 'development', '2024-07-24 19:14:42.458364', '2024-07-24 19:14:42.458365') RETURNING "key"[0m
Migrating to UserInfo (20240724182343)
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (1.0ms)[0m  [1m[35mCREATE TABLE "user_info" ("name" character varying NOT NULL, "email" character varying NOT NULL, "user_id" uuid NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.3ms)[0m  [1m[35mCREATE INDEX "index_user_info_on_user_id" ON "user_info" USING hash ("user_id")[0m
  [1m[35m (0.3ms)[0m  [1m[35mCREATE INDEX "index_user_info_on_email" ON "user_info" USING hash ("email")[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.1ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ('20240724182343') RETURNING "version"[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT[0m
Migrating to BrandInfo (20240724184120)
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (1.0ms)[0m  [1m[35mCREATE TABLE "brand_info" ("name" character varying NOT NULL, "state" character varying NOT NULL, "brand_id" uuid NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.2ms)[0m  [1m[35mCREATE INDEX "index_brand_info_on_brand_id" ON "brand_info" USING hash ("brand_id")[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.0ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ('20240724184120') RETURNING "version"[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT[0m
Migrating to ProductInfo (20240724184522)
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.8ms)[0m  [1m[35mCREATE TABLE "product_info" ("name" character varying NOT NULL, "state" character varying NOT NULL, "product_id" uuid NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.2ms)[0m  [1m[35mCREATE INDEX "index_product_info_on_product_id" ON "product_info" USING hash ("product_id")[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.0ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ('20240724184522') RETURNING "version"[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT[0m
Migrating to BrandProductOwnership (20240724184646)
  [1m[35m (0.0ms)[0m  [1m[34mSELECT pg_advisory_unlock(745793581222496940)[0m
  [1m[35m (88.9ms)[0m  [1m[35mCREATE DATABASE "wogi_app_development" ENCODING = 'unicode'[0m
  [1m[35m (29.0ms)[0m  [1m[35mCREATE DATABASE "wogi_app_test" ENCODING = 'unicode'[0m
  [1m[35m (1.6ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" character varying NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" character varying NOT NULL PRIMARY KEY, "value" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT pg_try_advisory_lock(745793581222496940)[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.2ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::InternalMetadata Create (0.1ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('environment', 'development', '2024-07-24 19:15:14.491457', '2024-07-24 19:15:14.491459') RETURNING "key"[0m
Migrating to UserInfo (20240724182343)
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (1.2ms)[0m  [1m[35mCREATE TABLE "user_info" ("name" character varying NOT NULL, "email" character varying NOT NULL, "user_id" uuid NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.3ms)[0m  [1m[35mCREATE INDEX "index_user_info_on_user_id" ON "user_info" USING hash ("user_id")[0m
  [1m[35m (0.2ms)[0m  [1m[35mCREATE INDEX "index_user_info_on_email" ON "user_info" USING hash ("email")[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.1ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ('20240724182343') RETURNING "version"[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT[0m
Migrating to BrandInfo (20240724184120)
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (1.1ms)[0m  [1m[35mCREATE TABLE "brand_info" ("name" character varying NOT NULL, "state" character varying NOT NULL, "brand_id" uuid NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.2ms)[0m  [1m[35mCREATE INDEX "index_brand_info_on_brand_id" ON "brand_info" USING hash ("brand_id")[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.0ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ('20240724184120') RETURNING "version"[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT[0m
Migrating to ProductInfo (20240724184522)
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.8ms)[0m  [1m[35mCREATE TABLE "product_info" ("name" character varying NOT NULL, "state" character varying NOT NULL, "product_id" uuid NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.2ms)[0m  [1m[35mCREATE INDEX "index_product_info_on_product_id" ON "product_info" USING hash ("product_id")[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.0ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ('20240724184522') RETURNING "version"[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mCOMMIT[0m
Migrating to BrandProductOwnership (20240724184646)
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.8ms)[0m  [1m[35mCREATE TABLE "brand_product_ownership" ("brand_id" uuid NOT NULL, "product_id" uuid NOT NULL, "ownership_id" uuid NOT NULL PRIMARY KEY)[0m
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT pg_advisory_unlock(745793581222496940)[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT pg_try_advisory_lock(745793581222496940)[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.2ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
Migrating to BrandProductOwnership (20240724184646)
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (1.2ms)[0m  [1m[35mCREATE TABLE "brand_product_ownership" ("brand_id" uuid NOT NULL, "product_id" uuid NOT NULL, "ownership_id" uuid NOT NULL PRIMARY KEY)[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT pg_advisory_unlock(745793581222496940)[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT pg_try_advisory_lock(745793581222496940)[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.2ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
Migrating to BrandProductOwnership (20240724184646)
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (1.1ms)[0m  [1m[35mCREATE TABLE "brand_product_ownership" ("brand_id" uuid NOT NULL, "product_id" uuid NOT NULL, "ownership_id" uuid NOT NULL PRIMARY KEY)[0m
  [1m[36mTRANSACTION (0.9ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT pg_advisory_unlock(745793581222496940)[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT pg_try_advisory_lock(745793581222496940)[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.2ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
Migrating to BrandProductOwnership (20240724184646)
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (1.1ms)[0m  [1m[35mCREATE TABLE "brand_product_ownership" ("brand_id" uuid NOT NULL, "product_id" uuid NOT NULL, "ownership_id" uuid NOT NULL PRIMARY KEY)[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT pg_advisory_unlock(745793581222496940)[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT pg_try_advisory_lock(745793581222496940)[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.3ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
Migrating to BrandProductOwnership (20240724184646)
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (1.4ms)[0m  [1m[35mCREATE TABLE "brand_product_ownership" ("brand_id" uuid, "product_id" uuid NOT NULL, "ownership_id" uuid NOT NULL PRIMARY KEY)[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT pg_advisory_unlock(745793581222496940)[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT pg_try_advisory_lock(745793581222496940)[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.2ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
Migrating to BrandProductOwnership (20240724184646)
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (2.1ms)[0m  [1m[35mCREATE TABLE "brand_product_ownership" ("brand_id" uuid NOT NULL, "product_id" uuid NOT NULL, "ownership_id" uuid NOT NULL PRIMARY KEY)[0m
  [1m[35m (3.9ms)[0m  [1m[35mALTER TABLE "brand_product_ownership" ADD CONSTRAINT "fk_rails_6c2a8ba87a"
FOREIGN KEY ("brand_id")
  REFERENCES "brand_info" ("brand_id")
[0m
  [1m[35m (0.6ms)[0m  [1m[35mALTER TABLE "brand_product_ownership" ADD CONSTRAINT "fk_rails_b8901de7cd"
FOREIGN KEY ("product_id")
  REFERENCES "product_info" ("product_id")
[0m
  [1m[35m (0.3ms)[0m  [1m[35mCREATE INDEX "index_brand_product_ownership_on_ownership_id" ON "brand_product_ownership" USING hash ("ownership_id")[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.1ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ('20240724184646') RETURNING "version"[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mCOMMIT[0m
Migrating to ClientProducts (20240724190727)
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (1.3ms)[0m  [1m[35mCREATE TABLE "client_products" ("client_id" uuid NOT NULL, "brand_product_id" uuid NOT NULL, "state" character varying NOT NULL, "payout_rate" decimal NOT NULL, "ownership_id" uuid NOT NULL PRIMARY KEY)[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT pg_advisory_unlock(745793581222496940)[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT pg_try_advisory_lock(745793581222496940)[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.2ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
Migrating to ClientProducts (20240724190727)
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (1.0ms)[0m  [1m[35mCREATE TABLE "client_products" ("client_id" uuid NOT NULL, "brand_product_id" uuid NOT NULL, "state" character varying NOT NULL, "payout_rate" decimal NOT NULL, "ownership_id" uuid NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.5ms)[0m  [1m[35mALTER TABLE "client_products" ADD CONSTRAINT "fk_rails_a1ac32cba3"
FOREIGN KEY ("brand_product_id")
  REFERENCES "brand_product_ownership" ("ownership_id")
[0m
  [1m[35m (0.8ms)[0m  [1m[35mALTER TABLE "client_products" ADD CONSTRAINT "fk_rails_167dcb595a"
FOREIGN KEY ("client_id")
  REFERENCES "user_info" ("client_id")
[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT pg_advisory_unlock(745793581222496940)[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT pg_try_advisory_lock(745793581222496940)[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.2ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
Migrating to ClientProducts (20240724190727)
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (1.9ms)[0m  [1m[35mCREATE TABLE "client_products" ("client_id" uuid NOT NULL, "brand_product_id" uuid NOT NULL, "state" character varying NOT NULL, "payout_rate" decimal NOT NULL, "ownership_id" uuid NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.6ms)[0m  [1m[35mALTER TABLE "client_products" ADD CONSTRAINT "fk_rails_a1ac32cba3"
FOREIGN KEY ("brand_product_id")
  REFERENCES "brand_product_ownership" ("ownership_id")
[0m
  [1m[35m (0.7ms)[0m  [1m[35mALTER TABLE "client_products" ADD CONSTRAINT "fk_rails_167dcb595a"
FOREIGN KEY ("client_id")
  REFERENCES "user_info" ("client_id")
[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT pg_advisory_unlock(745793581222496940)[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT pg_try_advisory_lock(745793581222496940)[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.2ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
Migrating to ClientProducts (20240724190727)
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (1.8ms)[0m  [1m[35mCREATE TABLE "client_products" ("client_id" uuid NOT NULL, "brand_product_id" uuid NOT NULL, "state" character varying NOT NULL, "payout_rate" decimal NOT NULL, "ownership_id" uuid NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "client_products" ADD CONSTRAINT "fk_rails_a1ac32cba3"
FOREIGN KEY ("brand_product_id")
  REFERENCES "brand_product_ownership" ("ownership_id")
[0m
  [1m[35m (0.6ms)[0m  [1m[35mALTER TABLE "client_products" ADD CONSTRAINT "fk_rails_167dcb595a"
FOREIGN KEY ("client_id")
  REFERENCES "user_info" ("user_id")
[0m
  [1m[35m (0.9ms)[0m  [1m[35mCREATE INDEX "index_client_products_on_ownership_id" ON "client_products" USING hash ("ownership_id")[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.1ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ('20240724190727') RETURNING "version"[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT pg_advisory_unlock(745793581222496940)[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (90.4ms)[0m  [1m[35mCREATE DATABASE "wogi_app_development" ENCODING = 'unicode'[0m
  [1m[35m (28.4ms)[0m  [1m[35mCREATE DATABASE "wogi_app_test" ENCODING = 'unicode'[0m
  [1m[35m (8.2ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" character varying NOT NULL PRIMARY KEY)[0m
  [1m[35m (1.3ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" character varying NOT NULL PRIMARY KEY, "value" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT pg_try_advisory_lock(745793581222496940)[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Load (1.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::InternalMetadata Create (0.4ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('environment', 'development', '2024-07-30 19:40:31.554664', '2024-07-30 19:40:31.554665') RETURNING "key"[0m
Migrating to CreateUsers (20240730191743)
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (1.2ms)[0m  [1m[35mCREATE TABLE "users" ("name" character varying NOT NULL, "email" character varying NOT NULL, "user_id" uuid NOT NULL PRIMARY KEY, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE INDEX "index_users_on_user_id" ON "users" USING hash ("user_id")[0m
  [1m[35m (0.2ms)[0m  [1m[35mCREATE INDEX "index_users_on_email" ON "users" USING hash ("email")[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.1ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ('20240730191743') RETURNING "version"[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT[0m
Migrating to CreateProducts (20240730192347)
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.9ms)[0m  [1m[35mCREATE TABLE "products" ("name" character varying NOT NULL, "state" character varying NOT NULL, "description" character varying NOT NULL, "product_id" uuid NOT NULL PRIMARY KEY, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (0.2ms)[0m  [1m[35mCREATE INDEX "index_products_on_product_id" ON "products" USING hash ("product_id")[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.0ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ('20240730192347') RETURNING "version"[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT[0m
Migrating to CreateBrandProducts (20240730192719)
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (2.3ms)[0m  [1m[35mCREATE TABLE "brand_products" ("brand_id" uuid NOT NULL, "product_id" uuid NOT NULL, "connection_id" uuid NOT NULL PRIMARY KEY, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (1.2ms)[0m  [1m[35mALTER TABLE "brand_product_ownership" ADD CONSTRAINT "fk_rails_6c2a8ba87a"
FOREIGN KEY ("brand_id")
  REFERENCES "brands" ("brand_id")
[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT pg_advisory_unlock(745793581222496940)[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT pg_try_advisory_lock(745793581222496940)[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.2ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
Migrating to CreateBrandProducts (20240730192719)
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.8ms)[0m  [1m[35mCREATE TABLE "brand_products" ("brand_id" uuid NOT NULL, "product_id" uuid NOT NULL, "connection_id" uuid NOT NULL PRIMARY KEY, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (0.8ms)[0m  [1m[35mALTER TABLE "brand_products" ADD CONSTRAINT "fk_rails_95a9b063f5"
FOREIGN KEY ("brand_id")
  REFERENCES "brands" ("brand_id")
[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT pg_advisory_unlock(745793581222496940)[0m
  [1m[35m (84.8ms)[0m  [1m[35mCREATE DATABASE "wogi_app_development" ENCODING = 'unicode'[0m
  [1m[35m (36.1ms)[0m  [1m[35mCREATE DATABASE "wogi_app_test" ENCODING = 'unicode'[0m
  [1m[35m (1.5ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" character varying NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.8ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" character varying NOT NULL PRIMARY KEY, "value" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT pg_try_advisory_lock(745793581222496940)[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.2ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::InternalMetadata Create (0.1ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('environment', 'development', '2024-07-30 19:46:08.819478', '2024-07-30 19:46:08.819479') RETURNING "key"[0m
Migrating to CreateUsers (20240730191743)
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (1.1ms)[0m  [1m[35mCREATE TABLE "users" ("name" character varying NOT NULL, "email" character varying NOT NULL, "user_id" uuid NOT NULL PRIMARY KEY, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (0.2ms)[0m  [1m[35mCREATE INDEX "index_users_on_user_id" ON "users" USING hash ("user_id")[0m
  [1m[35m (0.3ms)[0m  [1m[35mCREATE INDEX "index_users_on_email" ON "users" USING hash ("email")[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.1ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ('20240730191743') RETURNING "version"[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT[0m
Migrating to CreateProducts (20240730192347)
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.9ms)[0m  [1m[35mCREATE TABLE "products" ("name" character varying NOT NULL, "state" character varying NOT NULL, "description" character varying NOT NULL, "product_id" uuid NOT NULL PRIMARY KEY, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (0.2ms)[0m  [1m[35mCREATE INDEX "index_products_on_product_id" ON "products" USING hash ("product_id")[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.0ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ('20240730192347') RETURNING "version"[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT[0m
Migrating to CreateBrands (20240730192942)
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (1.6ms)[0m  [1m[35mCREATE TABLE "brands" ("name" character varying NOT NULL, "state" character varying NOT NULL, "brand_id" uuid NOT NULL PRIMARY KEY, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (0.2ms)[0m  [1m[35mCREATE INDEX "index_brands_on_brand_id" ON "brands" USING hash ("brand_id")[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.0ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ('20240730192942') RETURNING "version"[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT[0m
Migrating to CreateBrandProducts (20240730194450)
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (2.4ms)[0m  [1m[35mCREATE TABLE "brand_products" ("brand_id" uuid NOT NULL, "product_id" uuid NOT NULL, "connection_id" uuid NOT NULL PRIMARY KEY, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (0.9ms)[0m  [1m[35mALTER TABLE "brand_products" ADD CONSTRAINT "fk_rails_95a9b063f5"
FOREIGN KEY ("brand_id")
  REFERENCES "brands" ("brand_id")
[0m
  [1m[35m (0.3ms)[0m  [1m[35mALTER TABLE "brand_products" ADD CONSTRAINT "fk_rails_70540a0080"
FOREIGN KEY ("product_id")
  REFERENCES "products" ("product_id")
[0m
  [1m[35m (0.2ms)[0m  [1m[35mCREATE INDEX "index_brand_products_on_connection_id" ON "brand_products" USING hash ("connection_id")[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.0ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ('20240730194450') RETURNING "version"[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT[0m
Migrating to CreateClientProducts (20240730194458)
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.9ms)[0m  [1m[35mCREATE TABLE "client_products" ("client_id" uuid NOT NULL, "brand_product_id" uuid NOT NULL, "state" character varying NOT NULL, "payout_rate" float NOT NULL, "ownership_id" uuid NOT NULL PRIMARY KEY, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (0.3ms)[0m  [1m[35mALTER TABLE "client_products" ADD CONSTRAINT "fk_rails_a1ac32cba3"
FOREIGN KEY ("brand_product_id")
  REFERENCES "brand_products" ("connection_id")
[0m
  [1m[35m (0.2ms)[0m  [1m[35mALTER TABLE "client_products" ADD CONSTRAINT "fk_rails_167dcb595a"
FOREIGN KEY ("client_id")
  REFERENCES "users" ("user_id")
[0m
  [1m[35m (0.2ms)[0m  [1m[35mCREATE INDEX "index_client_products_on_ownership_id" ON "client_products" USING hash ("ownership_id")[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.0ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ('20240730194458') RETURNING "version"[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT pg_advisory_unlock(745793581222496940)[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT pg_try_advisory_lock(745793581222496940)[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.8ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.3ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
Migrating to AddTypeToUsers (20240730202256)
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (1.5ms)[0m  [1m[35mALTER TABLE "users" ADD "type" character varying[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.2ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ('20240730202256') RETURNING "version"[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT pg_advisory_unlock(745793581222496940)[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (128.1ms)[0m  [1m[35mCREATE DATABASE "wogi_app_development" ENCODING = 'unicode'[0m
  [1m[35m (44.7ms)[0m  [1m[35mCREATE DATABASE "wogi_app_test" ENCODING = 'unicode'[0m
  [1m[35m (4.3ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" character varying NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" character varying NOT NULL PRIMARY KEY, "value" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[34mSELECT pg_try_advisory_lock(745793581222496940)[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.3ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::InternalMetadata Create (0.4ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('environment', 'development', '2024-07-31 12:50:09.727468', '2024-07-31 12:50:09.727469') RETURNING "key"[0m
Migrating to CreateUsers (20240730191743)
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (1.7ms)[0m  [1m[35mCREATE TABLE "users" ("name" character varying NOT NULL, "email" character varying NOT NULL, "user_id" uuid NOT NULL PRIMARY KEY, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (1.4ms)[0m  [1m[35mCREATE INDEX "index_users_on_user_id" ON "users" USING hash ("user_id")[0m
  [1m[35m (0.4ms)[0m  [1m[35mCREATE INDEX "index_users_on_email" ON "users" USING hash ("email")[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.1ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ('20240730191743') RETURNING "version"[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT[0m
Migrating to CreateProducts (20240730192347)
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (1.6ms)[0m  [1m[35mCREATE TABLE "products" ("name" character varying NOT NULL, "state" character varying NOT NULL, "description" character varying NOT NULL, "product_id" uuid NOT NULL PRIMARY KEY, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (0.2ms)[0m  [1m[35mCREATE INDEX "index_products_on_product_id" ON "products" USING hash ("product_id")[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.0ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ('20240730192347') RETURNING "version"[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT[0m
Migrating to CreateBrands (20240730192942)
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.9ms)[0m  [1m[35mCREATE TABLE "brands" ("name" character varying NOT NULL, "state" character varying NOT NULL, "brand_id" uuid NOT NULL PRIMARY KEY, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (0.2ms)[0m  [1m[35mCREATE INDEX "index_brands_on_brand_id" ON "brands" USING hash ("brand_id")[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.0ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ('20240730192942') RETURNING "version"[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mCOMMIT[0m
Migrating to CreateBrandProducts (20240730194450)
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE TABLE "brand_products" ("brand_id" uuid NOT NULL, "product_id" uuid NOT NULL, "connection_id" uuid NOT NULL PRIMARY KEY, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (0.8ms)[0m  [1m[35mALTER TABLE "brand_products" ADD CONSTRAINT "fk_rails_95a9b063f5"
FOREIGN KEY ("brand_id")
  REFERENCES "brands" ("brand_id")
[0m
  [1m[35m (0.3ms)[0m  [1m[35mALTER TABLE "brand_products" ADD CONSTRAINT "fk_rails_70540a0080"
FOREIGN KEY ("product_id")
  REFERENCES "products" ("product_id")
[0m
  [1m[35m (0.2ms)[0m  [1m[35mCREATE INDEX "index_brand_products_on_connection_id" ON "brand_products" USING hash ("connection_id")[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.0ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ('20240730194450') RETURNING "version"[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT[0m
Migrating to CreateClientProducts (20240730194458)
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (1.0ms)[0m  [1m[35mCREATE TABLE "client_products" ("client_id" uuid NOT NULL, "brand_product_id" uuid NOT NULL, "state" character varying NOT NULL, "payout_rate" float NOT NULL, "ownership_id" uuid NOT NULL PRIMARY KEY, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (0.3ms)[0m  [1m[35mALTER TABLE "client_products" ADD CONSTRAINT "fk_rails_a1ac32cba3"
FOREIGN KEY ("brand_product_id")
  REFERENCES "brand_products" ("connection_id")
[0m
  [1m[35m (0.3ms)[0m  [1m[35mALTER TABLE "client_products" ADD CONSTRAINT "fk_rails_167dcb595a"
FOREIGN KEY ("client_id")
  REFERENCES "users" ("user_id")
[0m
  [1m[35m (0.2ms)[0m  [1m[35mCREATE INDEX "index_client_products_on_ownership_id" ON "client_products" USING hash ("ownership_id")[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.0ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ('20240730194458') RETURNING "version"[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT[0m
Migrating to AddTypeToUsers (20240730202256)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (2.1ms)[0m  [1m[35mALTER TABLE "users" ADD "type" character varying[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.1ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ('20240730202256') RETURNING "version"[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT[0m
Migrating to CreateAuths (20240731122427)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (5.9ms)[0m  [1m[35mCREATE TABLE "auths" ("id" bigserial primary key, "email" character varying, "password_digest" character varying, "role" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.1ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ('20240731122427') RETURNING "version"[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT pg_advisory_unlock(745793581222496940)[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.9ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mAuth Create (2.0ms)[0m  [1m[32mINSERT INTO "auths" ("email", "password_digest", "role", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["role", "admin"], ["created_at", "2024-07-31 12:50:14.532755"], ["updated_at", "2024-07-31 12:50:14.532755"]]
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mCOMMIT[0m
Started POST "/login" for ::1 at 2024-07-31 15:57:51 +0300
  [1m[36mActiveRecord::SchemaMigration Load (0.9ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  
ActionController::RoutingError (uninitialized constant AuthsController):

Causes:
ActionDispatch::MissingController (uninitialized constant AuthsController)
NameError (uninitialized constant AuthsController)
  
Started POST "/login" for ::1 at 2024-07-31 16:00:20 +0300
  [1m[36mActiveRecord::SchemaMigration Load (0.8ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  
Zeitwerk::NameError (expected file /Users/yanamishkova-kareva/GitHub/wogi_app/app/controllers/auths_controller.rb to define constant AuthsController, but didn't):
  
zeitwerk (2.6.16) lib/zeitwerk/loader/callbacks.rb:32:in `on_file_autoloaded'
zeitwerk (2.6.16) lib/zeitwerk/kernel.rb:27:in `require'
activesupport (7.2.0.beta3) lib/active_support/inflector/methods.rb:290:in `const_get'
activesupport (7.2.0.beta3) lib/active_support/inflector/methods.rb:290:in `constantize'
activesupport (7.2.0.beta3) lib/active_support/core_ext/string/inflections.rb:74:in `constantize'
actionpack (7.2.0.beta3) lib/action_dispatch/http/request.rb:92:in `controller_class_for'
actionpack (7.2.0.beta3) lib/action_dispatch/request/utils.rb:102:in `action_encoding_template'
actionpack (7.2.0.beta3) lib/action_dispatch/request/utils.rb:87:in `encode'
actionpack (7.2.0.beta3) lib/action_dispatch/request/utils.rb:47:in `set_binary_encoding'
actionpack (7.2.0.beta3) lib/action_dispatch/http/parameters.rb:70:in `path_parameters='
actionpack (7.2.0.beta3) lib/action_dispatch/journey/router.rb:50:in `block in serve'
actionpack (7.2.0.beta3) lib/action_dispatch/journey/router.rb:133:in `block in find_routes'
actionpack (7.2.0.beta3) lib/action_dispatch/journey/router.rb:126:in `each'
actionpack (7.2.0.beta3) lib/action_dispatch/journey/router.rb:126:in `find_routes'
actionpack (7.2.0.beta3) lib/action_dispatch/journey/router.rb:34:in `serve'
actionpack (7.2.0.beta3) lib/action_dispatch/routing/route_set.rb:896:in `call'
rack (3.1.7) lib/rack/tempfile_reaper.rb:20:in `call'
rack (3.1.7) lib/rack/etag.rb:29:in `call'
rack (3.1.7) lib/rack/conditional_get.rb:43:in `call'
rack (3.1.7) lib/rack/head.rb:15:in `call'
actionpack (7.2.0.beta3) lib/action_dispatch/http/permissions_policy.rb:38:in `call'
actionpack (7.2.0.beta3) lib/action_dispatch/http/content_security_policy.rb:36:in `call'
rack-session (2.0.0) lib/rack/session/abstract/id.rb:272:in `context'
rack-session (2.0.0) lib/rack/session/abstract/id.rb:266:in `call'
actionpack (7.2.0.beta3) lib/action_dispatch/middleware/cookies.rb:704:in `call'
activerecord (7.2.0.beta3) lib/active_record/migration.rb:674:in `call'
actionpack (7.2.0.beta3) lib/action_dispatch/middleware/callbacks.rb:31:in `block in call'
activesupport (7.2.0.beta3) lib/active_support/callbacks.rb:101:in `run_callbacks'
actionpack (7.2.0.beta3) lib/action_dispatch/middleware/callbacks.rb:30:in `call'
actionpack (7.2.0.beta3) lib/action_dispatch/middleware/executor.rb:16:in `call'
actionpack (7.2.0.beta3) lib/action_dispatch/middleware/actionable_exceptions.rb:18:in `call'
actionpack (7.2.0.beta3) lib/action_dispatch/middleware/debug_exceptions.rb:31:in `call'
web-console (4.2.1) lib/web_console/middleware.rb:132:in `call_app'
web-console (4.2.1) lib/web_console/middleware.rb:28:in `block in call'
web-console (4.2.1) lib/web_console/middleware.rb:17:in `catch'
web-console (4.2.1) lib/web_console/middleware.rb:17:in `call'
actionpack (7.2.0.beta3) lib/action_dispatch/middleware/show_exceptions.rb:32:in `call'
railties (7.2.0.beta3) lib/rails/rack/logger.rb:41:in `call_app'
railties (7.2.0.beta3) lib/rails/rack/logger.rb:29:in `call'
sprockets-rails (3.5.1) lib/sprockets/rails/quiet_assets.rb:17:in `call'
actionpack (7.2.0.beta3) lib/action_dispatch/middleware/remote_ip.rb:96:in `call'
actionpack (7.2.0.beta3) lib/action_dispatch/middleware/request_id.rb:33:in `call'
rack (3.1.7) lib/rack/method_override.rb:28:in `call'
rack (3.1.7) lib/rack/runtime.rb:24:in `call'
activesupport (7.2.0.beta3) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (7.2.0.beta3) lib/action_dispatch/middleware/server_timing.rb:61:in `block in call'
actionpack (7.2.0.beta3) lib/action_dispatch/middleware/server_timing.rb:26:in `collect_events'
actionpack (7.2.0.beta3) lib/action_dispatch/middleware/server_timing.rb:60:in `call'
actionpack (7.2.0.beta3) lib/action_dispatch/middleware/executor.rb:16:in `call'
actionpack (7.2.0.beta3) lib/action_dispatch/middleware/static.rb:27:in `call'
rack (3.1.7) lib/rack/sendfile.rb:114:in `call'
actionpack (7.2.0.beta3) lib/action_dispatch/middleware/host_authorization.rb:143:in `call'
rack-cors (2.0.2) lib/rack/cors.rb:102:in `call'
railties (7.2.0.beta3) lib/rails/engine.rb:535:in `call'
puma (6.4.2) lib/puma/configuration.rb:272:in `call'
puma (6.4.2) lib/puma/request.rb:100:in `block in handle_request'
puma (6.4.2) lib/puma/thread_pool.rb:378:in `with_force_shutdown'
puma (6.4.2) lib/puma/request.rb:99:in `handle_request'
puma (6.4.2) lib/puma/server.rb:464:in `process_client'
puma (6.4.2) lib/puma/server.rb:245:in `block in run'
puma (6.4.2) lib/puma/thread_pool.rb:155:in `block in spawn_thread'
Started POST "/login" for ::1 at 2024-07-31 16:00:56 +0300
  [1m[36mActiveRecord::SchemaMigration Load (0.7ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by AuthsController#login as */*
  Parameters: {"email"=>"[FILTERED]", "password"=>"[FILTERED]"}
Completed 500 Internal Server Error in 36ms (ActiveRecord: 11.9ms (0 queries, 0 cached) | GC: 0.0ms)


  
ActiveRecord::StatementInvalid (PG::UndefinedColumn: ERROR:  column auths.username does not exist
LINE 1: SELECT "auths".* FROM "auths" WHERE "auths"."username" = $1 ...
                                            ^
):

Causes:
PG::UndefinedColumn (ERROR:  column auths.username does not exist
LINE 1: SELECT "auths".* FROM "auths" WHERE "auths"."username" = $1 ...
                                            ^
)
  
Started POST "/login" for ::1 at 2024-07-31 16:01:58 +0300
  [1m[36mActiveRecord::SchemaMigration Load (0.7ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by AuthsController#login as */*
  Parameters: {"email"=>"[FILTERED]", "password"=>"[FILTERED]"}
  [1m[36mAuth Load (1.1ms)[0m  [1m[34mSELECT "auths".* FROM "auths" WHERE "auths"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  ↳ app/controllers/auths_controller.rb:17:in `login'
Completed 200 OK in 268ms (Views: 0.4ms | ActiveRecord: 14.8ms (1 query, 0 cached) | GC: 0.0ms)


Started POST "/register" for ::1 at 2024-07-31 16:03:12 +0300
Processing by AuthsController#create as */*
  Parameters: {"email"=>"[FILTERED]", "password"=>"[FILTERED]", "role"=>"client"}
Completed 500 Internal Server Error in 2ms (ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)


  
NameError (undefined local variable or method `auth_params' for an instance of AuthsController):
  
app/controllers/auths_controller.rb:6:in `create'
Started POST "/register" for ::1 at 2024-07-31 16:03:36 +0300
  [1m[36mActiveRecord::SchemaMigration Load (1.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by AuthsController#create as */*
  Parameters: {"email"=>"[FILTERED]", "password"=>"[FILTERED]", "role"=>"client"}
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/auths_controller.rb:6:in `create'
  [1m[36mAuth Create (3.4ms)[0m  [1m[32mINSERT INTO "auths" ("email", "password_digest", "role", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["role", "client"], ["created_at", "2024-07-31 13:03:36.405123"], ["updated_at", "2024-07-31 13:03:36.405123"]]
  ↳ app/controllers/auths_controller.rb:6:in `create'
  [1m[36mTRANSACTION (1.2ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/auths_controller.rb:6:in `create'
Completed 200 OK in 268ms (Views: 0.2ms | ActiveRecord: 18.5ms (1 query, 0 cached) | GC: 0.0ms)


Started POST "/register" for ::1 at 2024-07-31 20:16:13 +0300
Processing by AuthsController#create_client as */*
  Parameters: {"email"=>"[FILTERED]", "password"=>"[FILTERED]"}
Completed 404 Not Found in 2ms (ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)


  
AbstractController::ActionNotFound (The auto_login action could not be found for the :authorized
callback on AuthsController, but it is listed in the controller's
:only option.

Raising for missing callback actions is a new default in Rails 7.1, if you'd
like to turn this off you can delete the option from the environment configurations
or set `config.action_controller.raise_on_missing_callback_actions` to `false`.
):
  
actionpack (7.2.0.beta3) lib/abstract_controller/callbacks.rb:62:in `match?'
activesupport (7.2.0.beta3) lib/active_support/callbacks.rb:385:in `block in make_lambda'
activesupport (7.2.0.beta3) lib/active_support/callbacks.rb:178:in `block in call'
activesupport (7.2.0.beta3) lib/active_support/callbacks.rb:178:in `all?'
activesupport (7.2.0.beta3) lib/active_support/callbacks.rb:178:in `call'
activesupport (7.2.0.beta3) lib/active_support/callbacks.rb:559:in `block in invoke_before'
activesupport (7.2.0.beta3) lib/active_support/callbacks.rb:559:in `each'
activesupport (7.2.0.beta3) lib/active_support/callbacks.rb:559:in `invoke_before'
activesupport (7.2.0.beta3) lib/active_support/callbacks.rb:119:in `block in run_callbacks'
turbo-rails (2.0.6) lib/turbo-rails.rb:24:in `with_request_id'
turbo-rails (2.0.6) app/controllers/concerns/turbo/request_id_tracking.rb:10:in `turbo_tracking_request_id'
activesupport (7.2.0.beta3) lib/active_support/callbacks.rb:130:in `block in run_callbacks'
activesupport (7.2.0.beta3) lib/active_support/callbacks.rb:141:in `run_callbacks'
actionpack (7.2.0.beta3) lib/abstract_controller/callbacks.rb:260:in `process_action'
actionpack (7.2.0.beta3) lib/action_controller/metal/rescue.rb:27:in `process_action'
actionpack (7.2.0.beta3) lib/action_controller/metal/instrumentation.rb:77:in `block in process_action'
activesupport (7.2.0.beta3) lib/active_support/notifications.rb:210:in `block in instrument'
activesupport (7.2.0.beta3) lib/active_support/notifications/instrumenter.rb:58:in `instrument'
activesupport (7.2.0.beta3) lib/active_support/notifications.rb:210:in `instrument'
actionpack (7.2.0.beta3) lib/action_controller/metal/instrumentation.rb:76:in `process_action'
actionpack (7.2.0.beta3) lib/action_controller/metal/params_wrapper.rb:259:in `process_action'
activerecord (7.2.0.beta3) lib/active_record/railties/controller_runtime.rb:39:in `process_action'
actionpack (7.2.0.beta3) lib/abstract_controller/base.rb:163:in `process'
actionview (7.2.0.beta3) lib/action_view/rendering.rb:40:in `process'
actionpack (7.2.0.beta3) lib/action_controller/metal.rb:252:in `dispatch'
actionpack (7.2.0.beta3) lib/action_controller/metal.rb:335:in `dispatch'
actionpack (7.2.0.beta3) lib/action_dispatch/routing/route_set.rb:67:in `dispatch'
actionpack (7.2.0.beta3) lib/action_dispatch/routing/route_set.rb:50:in `serve'
actionpack (7.2.0.beta3) lib/action_dispatch/journey/router.rb:53:in `block in serve'
actionpack (7.2.0.beta3) lib/action_dispatch/journey/router.rb:133:in `block in find_routes'
actionpack (7.2.0.beta3) lib/action_dispatch/journey/router.rb:126:in `each'
actionpack (7.2.0.beta3) lib/action_dispatch/journey/router.rb:126:in `find_routes'
actionpack (7.2.0.beta3) lib/action_dispatch/journey/router.rb:34:in `serve'
actionpack (7.2.0.beta3) lib/action_dispatch/routing/route_set.rb:896:in `call'
rack (3.1.7) lib/rack/tempfile_reaper.rb:20:in `call'
rack (3.1.7) lib/rack/etag.rb:29:in `call'
rack (3.1.7) lib/rack/conditional_get.rb:43:in `call'
rack (3.1.7) lib/rack/head.rb:15:in `call'
actionpack (7.2.0.beta3) lib/action_dispatch/http/permissions_policy.rb:38:in `call'
actionpack (7.2.0.beta3) lib/action_dispatch/http/content_security_policy.rb:36:in `call'
rack-session (2.0.0) lib/rack/session/abstract/id.rb:272:in `context'
rack-session (2.0.0) lib/rack/session/abstract/id.rb:266:in `call'
actionpack (7.2.0.beta3) lib/action_dispatch/middleware/cookies.rb:704:in `call'
activerecord (7.2.0.beta3) lib/active_record/migration.rb:674:in `call'
actionpack (7.2.0.beta3) lib/action_dispatch/middleware/callbacks.rb:31:in `block in call'
activesupport (7.2.0.beta3) lib/active_support/callbacks.rb:101:in `run_callbacks'
actionpack (7.2.0.beta3) lib/action_dispatch/middleware/callbacks.rb:30:in `call'
actionpack (7.2.0.beta3) lib/action_dispatch/middleware/executor.rb:16:in `call'
actionpack (7.2.0.beta3) lib/action_dispatch/middleware/actionable_exceptions.rb:18:in `call'
actionpack (7.2.0.beta3) lib/action_dispatch/middleware/debug_exceptions.rb:31:in `call'
web-console (4.2.1) lib/web_console/middleware.rb:132:in `call_app'
web-console (4.2.1) lib/web_console/middleware.rb:28:in `block in call'
web-console (4.2.1) lib/web_console/middleware.rb:17:in `catch'
web-console (4.2.1) lib/web_console/middleware.rb:17:in `call'
actionpack (7.2.0.beta3) lib/action_dispatch/middleware/show_exceptions.rb:32:in `call'
railties (7.2.0.beta3) lib/rails/rack/logger.rb:41:in `call_app'
railties (7.2.0.beta3) lib/rails/rack/logger.rb:29:in `call'
sprockets-rails (3.5.1) lib/sprockets/rails/quiet_assets.rb:17:in `call'
actionpack (7.2.0.beta3) lib/action_dispatch/middleware/remote_ip.rb:96:in `call'
actionpack (7.2.0.beta3) lib/action_dispatch/middleware/request_id.rb:33:in `call'
rack (3.1.7) lib/rack/method_override.rb:28:in `call'
rack (3.1.7) lib/rack/runtime.rb:24:in `call'
activesupport (7.2.0.beta3) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (7.2.0.beta3) lib/action_dispatch/middleware/server_timing.rb:61:in `block in call'
actionpack (7.2.0.beta3) lib/action_dispatch/middleware/server_timing.rb:26:in `collect_events'
actionpack (7.2.0.beta3) lib/action_dispatch/middleware/server_timing.rb:60:in `call'
actionpack (7.2.0.beta3) lib/action_dispatch/middleware/executor.rb:16:in `call'
actionpack (7.2.0.beta3) lib/action_dispatch/middleware/static.rb:27:in `call'
rack (3.1.7) lib/rack/sendfile.rb:114:in `call'
actionpack (7.2.0.beta3) lib/action_dispatch/middleware/host_authorization.rb:143:in `call'
rack-cors (2.0.2) lib/rack/cors.rb:102:in `call'
railties (7.2.0.beta3) lib/rails/engine.rb:535:in `call'
puma (6.4.2) lib/puma/configuration.rb:272:in `call'
puma (6.4.2) lib/puma/request.rb:100:in `block in handle_request'
puma (6.4.2) lib/puma/thread_pool.rb:378:in `with_force_shutdown'
puma (6.4.2) lib/puma/request.rb:99:in `handle_request'
puma (6.4.2) lib/puma/server.rb:464:in `process_client'
puma (6.4.2) lib/puma/server.rb:245:in `block in run'
puma (6.4.2) lib/puma/thread_pool.rb:155:in `block in spawn_thread'
Started POST "/register" for ::1 at 2024-07-31 20:16:43 +0300
  [1m[36mActiveRecord::SchemaMigration Load (1.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by AuthsController#create_client as */*
  Parameters: {"email"=>"[FILTERED]", "password"=>"[FILTERED]"}
Filter chain halted as :authorized rendered or redirected
Completed 401 Unauthorized in 0ms (Views: 0.1ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)


Started POST "/register" for ::1 at 2024-07-31 20:17:26 +0300
Processing by AuthsController#create_client as */*
  Parameters: {"email"=>"[FILTERED]", "password"=>"[FILTERED]"}
Filter chain halted as :authorized rendered or redirected
Completed 401 Unauthorized in 0ms (Views: 0.2ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)


Started POST "/register" for ::1 at 2024-07-31 20:17:36 +0300
  [1m[36mActiveRecord::SchemaMigration Load (0.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by AuthsController#create_client as */*
  Parameters: {"email"=>"[FILTERED]", "password"=>"[FILTERED]"}
Filter chain halted as :authorized rendered or redirected
Completed 401 Unauthorized in 0ms (Views: 0.1ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)


Started POST "/register" for ::1 at 2024-07-31 20:19:47 +0300
  [1m[36mActiveRecord::SchemaMigration Load (1.9ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by AuthsController#create_client as */*
  Parameters: {"email"=>"[FILTERED]", "password"=>"[FILTERED]"}
Completed 404 Not Found in 1ms (ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)


  
AbstractController::ActionNotFound (The create action could not be found for the :authorized
callback on AuthsController, but it is listed in the controller's
:only option.

Raising for missing callback actions is a new default in Rails 7.1, if you'd
like to turn this off you can delete the option from the environment configurations
or set `config.action_controller.raise_on_missing_callback_actions` to `false`.
):
  
actionpack (7.2.0.beta3) lib/abstract_controller/callbacks.rb:62:in `match?'
activesupport (7.2.0.beta3) lib/active_support/callbacks.rb:391:in `block in inverted_lambda'
activesupport (7.2.0.beta3) lib/active_support/callbacks.rb:178:in `block in call'
activesupport (7.2.0.beta3) lib/active_support/callbacks.rb:178:in `all?'
activesupport (7.2.0.beta3) lib/active_support/callbacks.rb:178:in `call'
activesupport (7.2.0.beta3) lib/active_support/callbacks.rb:559:in `block in invoke_before'
activesupport (7.2.0.beta3) lib/active_support/callbacks.rb:559:in `each'
activesupport (7.2.0.beta3) lib/active_support/callbacks.rb:559:in `invoke_before'
activesupport (7.2.0.beta3) lib/active_support/callbacks.rb:119:in `block in run_callbacks'
turbo-rails (2.0.6) lib/turbo-rails.rb:24:in `with_request_id'
turbo-rails (2.0.6) app/controllers/concerns/turbo/request_id_tracking.rb:10:in `turbo_tracking_request_id'
activesupport (7.2.0.beta3) lib/active_support/callbacks.rb:130:in `block in run_callbacks'
activesupport (7.2.0.beta3) lib/active_support/callbacks.rb:141:in `run_callbacks'
actionpack (7.2.0.beta3) lib/abstract_controller/callbacks.rb:260:in `process_action'
actionpack (7.2.0.beta3) lib/action_controller/metal/rescue.rb:27:in `process_action'
actionpack (7.2.0.beta3) lib/action_controller/metal/instrumentation.rb:77:in `block in process_action'
activesupport (7.2.0.beta3) lib/active_support/notifications.rb:210:in `block in instrument'
activesupport (7.2.0.beta3) lib/active_support/notifications/instrumenter.rb:58:in `instrument'
activesupport (7.2.0.beta3) lib/active_support/notifications.rb:210:in `instrument'
actionpack (7.2.0.beta3) lib/action_controller/metal/instrumentation.rb:76:in `process_action'
actionpack (7.2.0.beta3) lib/action_controller/metal/params_wrapper.rb:259:in `process_action'
activerecord (7.2.0.beta3) lib/active_record/railties/controller_runtime.rb:39:in `process_action'
actionpack (7.2.0.beta3) lib/abstract_controller/base.rb:163:in `process'
actionview (7.2.0.beta3) lib/action_view/rendering.rb:40:in `process'
actionpack (7.2.0.beta3) lib/action_controller/metal.rb:252:in `dispatch'
actionpack (7.2.0.beta3) lib/action_controller/metal.rb:335:in `dispatch'
actionpack (7.2.0.beta3) lib/action_dispatch/routing/route_set.rb:67:in `dispatch'
actionpack (7.2.0.beta3) lib/action_dispatch/routing/route_set.rb:50:in `serve'
actionpack (7.2.0.beta3) lib/action_dispatch/journey/router.rb:53:in `block in serve'
actionpack (7.2.0.beta3) lib/action_dispatch/journey/router.rb:133:in `block in find_routes'
actionpack (7.2.0.beta3) lib/action_dispatch/journey/router.rb:126:in `each'
actionpack (7.2.0.beta3) lib/action_dispatch/journey/router.rb:126:in `find_routes'
actionpack (7.2.0.beta3) lib/action_dispatch/journey/router.rb:34:in `serve'
actionpack (7.2.0.beta3) lib/action_dispatch/routing/route_set.rb:896:in `call'
rack (3.1.7) lib/rack/tempfile_reaper.rb:20:in `call'
rack (3.1.7) lib/rack/etag.rb:29:in `call'
rack (3.1.7) lib/rack/conditional_get.rb:43:in `call'
rack (3.1.7) lib/rack/head.rb:15:in `call'
actionpack (7.2.0.beta3) lib/action_dispatch/http/permissions_policy.rb:38:in `call'
actionpack (7.2.0.beta3) lib/action_dispatch/http/content_security_policy.rb:36:in `call'
rack-session (2.0.0) lib/rack/session/abstract/id.rb:272:in `context'
rack-session (2.0.0) lib/rack/session/abstract/id.rb:266:in `call'
actionpack (7.2.0.beta3) lib/action_dispatch/middleware/cookies.rb:704:in `call'
activerecord (7.2.0.beta3) lib/active_record/migration.rb:674:in `call'
actionpack (7.2.0.beta3) lib/action_dispatch/middleware/callbacks.rb:31:in `block in call'
activesupport (7.2.0.beta3) lib/active_support/callbacks.rb:101:in `run_callbacks'
actionpack (7.2.0.beta3) lib/action_dispatch/middleware/callbacks.rb:30:in `call'
actionpack (7.2.0.beta3) lib/action_dispatch/middleware/executor.rb:16:in `call'
actionpack (7.2.0.beta3) lib/action_dispatch/middleware/actionable_exceptions.rb:18:in `call'
actionpack (7.2.0.beta3) lib/action_dispatch/middleware/debug_exceptions.rb:31:in `call'
web-console (4.2.1) lib/web_console/middleware.rb:132:in `call_app'
web-console (4.2.1) lib/web_console/middleware.rb:28:in `block in call'
web-console (4.2.1) lib/web_console/middleware.rb:17:in `catch'
web-console (4.2.1) lib/web_console/middleware.rb:17:in `call'
actionpack (7.2.0.beta3) lib/action_dispatch/middleware/show_exceptions.rb:32:in `call'
railties (7.2.0.beta3) lib/rails/rack/logger.rb:41:in `call_app'
railties (7.2.0.beta3) lib/rails/rack/logger.rb:29:in `call'
sprockets-rails (3.5.1) lib/sprockets/rails/quiet_assets.rb:17:in `call'
actionpack (7.2.0.beta3) lib/action_dispatch/middleware/remote_ip.rb:96:in `call'
actionpack (7.2.0.beta3) lib/action_dispatch/middleware/request_id.rb:33:in `call'
rack (3.1.7) lib/rack/method_override.rb:28:in `call'
rack (3.1.7) lib/rack/runtime.rb:24:in `call'
activesupport (7.2.0.beta3) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (7.2.0.beta3) lib/action_dispatch/middleware/server_timing.rb:61:in `block in call'
actionpack (7.2.0.beta3) lib/action_dispatch/middleware/server_timing.rb:26:in `collect_events'
actionpack (7.2.0.beta3) lib/action_dispatch/middleware/server_timing.rb:60:in `call'
actionpack (7.2.0.beta3) lib/action_dispatch/middleware/executor.rb:16:in `call'
actionpack (7.2.0.beta3) lib/action_dispatch/middleware/static.rb:27:in `call'
rack (3.1.7) lib/rack/sendfile.rb:114:in `call'
actionpack (7.2.0.beta3) lib/action_dispatch/middleware/host_authorization.rb:143:in `call'
rack-cors (2.0.2) lib/rack/cors.rb:102:in `call'
railties (7.2.0.beta3) lib/rails/engine.rb:535:in `call'
puma (6.4.2) lib/puma/configuration.rb:272:in `call'
puma (6.4.2) lib/puma/request.rb:100:in `block in handle_request'
puma (6.4.2) lib/puma/thread_pool.rb:378:in `with_force_shutdown'
puma (6.4.2) lib/puma/request.rb:99:in `handle_request'
puma (6.4.2) lib/puma/server.rb:464:in `process_client'
puma (6.4.2) lib/puma/server.rb:245:in `block in run'
puma (6.4.2) lib/puma/thread_pool.rb:155:in `block in spawn_thread'
Started POST "/register" for ::1 at 2024-07-31 20:20:14 +0300
  [1m[36mActiveRecord::SchemaMigration Load (1.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by AuthsController#create_client as */*
  Parameters: {"email"=>"[FILTERED]", "password"=>"[FILTERED]"}
Completed 500 Internal Server Error in 4ms (ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)


  
NoMethodError (undefined method `<<' for an instance of ActionController::Parameters):
  
app/controllers/auths_controller.rb:9:in `create_client'
Started POST "/register" for ::1 at 2024-07-31 20:24:35 +0300
  [1m[36mActiveRecord::SchemaMigration Load (1.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by AuthsController#create_client as */*
  Parameters: {"email"=>"[FILTERED]", "password"=>"[FILTERED]", "role"=>"client"}
Completed 500 Internal Server Error in 4ms (ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)


  
ArgumentError (wrong number of arguments (given 2, expected 1)):
  
app/controllers/auths_controller.rb:33:in `auth_params'
app/controllers/auths_controller.rb:9:in `create_client'
Started POST "/register" for ::1 at 2024-07-31 20:27:03 +0300
  [1m[36mActiveRecord::SchemaMigration Load (2.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by AuthsController#create_client as */*
  Parameters: {"email"=>"[FILTERED]", "password"=>"[FILTERED]", "role"=>"client"}
[31mUnpermitted parameter: :role. Context: { controller: AuthsController, action: create_client, request: #<ActionDispatch::Request:0x0000000122216560>, params: {"email"=>"[FILTERED]", "password"=>"[FILTERED]", "role"=>"client", "controller"=>"auths", "action"=>"create_client"} }[0m
Completed 500 Internal Server Error in 0ms (ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)


  
NoMethodError (undefined method `[]' for nil):
  
app/controllers/auths_controller.rb:9:in `create_client'
Started POST "/register" for ::1 at 2024-07-31 20:27:34 +0300
  [1m[36mActiveRecord::SchemaMigration Load (0.7ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by AuthsController#create_client as */*
  Parameters: {"email"=>"[FILTERED]", "password"=>"[FILTERED]", "role"=>"client"}
[31mUnpermitted parameter: :role. Context: { controller: AuthsController, action: create_client, request: #<ActionDispatch::Request:0x0000000123296548>, params: {"email"=>"[FILTERED]", "password"=>"[FILTERED]", "role"=>"client", "controller"=>"auths", "action"=>"create_client"} }[0m
[31mUnpermitted parameter: :role. Context: { controller: AuthsController, action: create_client, request: #<ActionDispatch::Request:0x0000000123296548>, params: {"email"=>"[FILTERED]", "password"=>"[FILTERED]", "role"=>"client", "controller"=>"auths", "action"=>"create_client"} }[0m
Completed 500 Internal Server Error in 4ms (Views: 0.1ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)


  
NoMethodError (undefined method `<<' for an instance of ActionController::Parameters):
  
app/controllers/auths_controller.rb:13:in `create_client'
Started POST "/register" for ::1 at 2024-07-31 20:28:00 +0300
  [1m[36mActiveRecord::SchemaMigration Load (1.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by AuthsController#create_client as */*
  Parameters: {"email"=>"[FILTERED]", "password"=>"[FILTERED]", "role"=>"client"}
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/auths_controller.rb:13:in `create_client'
  [1m[36mAuth Create (3.8ms)[0m  [1m[32mINSERT INTO "auths" ("email", "password_digest", "role", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["role", "client"], ["created_at", "2024-07-31 17:28:00.689878"], ["updated_at", "2024-07-31 17:28:00.689878"]]
  ↳ app/controllers/auths_controller.rb:13:in `create_client'
  [1m[36mTRANSACTION (1.2ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/auths_controller.rb:13:in `create_client'
Completed 200 OK in 277ms (Views: 0.1ms | ActiveRecord: 25.8ms (1 query, 0 cached) | GC: 0.0ms)


Started POST "/register" for ::1 at 2024-07-31 20:28:12 +0300
Processing by AuthsController#create_client as */*
  Parameters: {"email"=>"[FILTERED]", "password"=>"[FILTERED]", "role"=>"test"}
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/auths_controller.rb:13:in `create_client'
  [1m[36mAuth Create (1.5ms)[0m  [1m[32mINSERT INTO "auths" ("email", "password_digest", "role", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["role", "test"], ["created_at", "2024-07-31 17:28:12.860270"], ["updated_at", "2024-07-31 17:28:12.860270"]]
  ↳ app/controllers/auths_controller.rb:13:in `create_client'
  [1m[36mTRANSACTION (1.4ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/auths_controller.rb:13:in `create_client'
Completed 500 Internal Server Error in 272ms (Views: 0.1ms | ActiveRecord: 3.3ms (1 query, 0 cached) | GC: 0.0ms)


  
AbstractController::DoubleRenderError (Render and/or redirect were called multiple times in this action. Please note that you may only call render OR redirect, and at most once per action. Also note that neither redirect nor render terminate execution of the action, so if you want to exit an action after redirecting, you need to do something like "redirect_to(...); return".):
  
app/controllers/auths_controller.rb:16:in `create_client'
Started POST "/register" for ::1 at 2024-07-31 20:28:39 +0300
  [1m[36mActiveRecord::SchemaMigration Load (1.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by AuthsController#create_client as */*
  Parameters: {"email"=>"[FILTERED]", "password"=>"[FILTERED]", "role"=>"test"}
Completed 200 OK in 0ms (Views: 0.1ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)


Started POST "/login" for ::1 at 2024-07-31 20:29:22 +0300
Processing by AuthsController#login as */*
  Parameters: {"email"=>"[FILTERED]", "password"=>"[FILTERED]"}
Filter chain halted as :authorized rendered or redirected
Completed 401 Unauthorized in 1ms (Views: 0.5ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)


Started POST "/login" for ::1 at 2024-07-31 20:29:23 +0300
Processing by AuthsController#login as */*
  Parameters: {"email"=>"[FILTERED]", "password"=>"[FILTERED]"}
Filter chain halted as :authorized rendered or redirected
Completed 401 Unauthorized in 0ms (Views: 0.1ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)


Started POST "/login" for ::1 at 2024-07-31 20:29:38 +0300
  [1m[36mActiveRecord::SchemaMigration Load (1.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by AuthsController#login as */*
  Parameters: {"email"=>"[FILTERED]", "password"=>"[FILTERED]"}
  [1m[36mAuth Load (0.9ms)[0m  [1m[34mSELECT "auths".* FROM "auths" WHERE "auths"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  ↳ app/controllers/auths_controller.rb:25:in `login'
Completed 200 OK in 278ms (Views: 0.3ms | ActiveRecord: 25.8ms (1 query, 0 cached) | GC: 0.0ms)


Started POST "/login" for ::1 at 2024-07-31 20:32:52 +0300
Processing by AuthsController#login as */*
  Parameters: {"email"=>"[FILTERED]", "password"=>"[FILTERED]"}
  [1m[36mAuth Load (0.3ms)[0m  [1m[34mSELECT "auths".* FROM "auths" WHERE "auths"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  ↳ app/controllers/auths_controller.rb:38:in `login'
Completed 200 OK in 270ms (Views: 0.7ms | ActiveRecord: 10.7ms (1 query, 0 cached) | GC: 0.0ms)


Started POST "/login" for ::1 at 2024-07-31 20:33:44 +0300
  [1m[36mActiveRecord::SchemaMigration Load (0.9ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by AuthsController#login as */*
  Parameters: {"email"=>"[FILTERED]", "password"=>"[FILTERED]"}
  [1m[36mAuth Load (0.4ms)[0m  [1m[34mSELECT "auths".* FROM "auths" WHERE "auths"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  ↳ app/controllers/auths_controller.rb:38:in `login'
Completed 200 OK in 269ms (Views: 0.3ms | ActiveRecord: 12.8ms (1 query, 0 cached) | GC: 0.0ms)


Started POST "/register_admin" for ::1 at 2024-07-31 20:34:23 +0300
Processing by AuthsController#add_admin as */*
  Parameters: {"email"=>"[FILTERED]", "password"=>"[FILTERED]", "role"=>"admin"}
  [1m[36mAuth Load (0.4ms)[0m  [1m[34mSELECT "auths".* FROM "auths" WHERE "auths"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:28:in `logged_in_user'
  [1m[36mCACHE Auth Load (0.0ms)[0m  [1m[34mSELECT "auths".* FROM "auths" WHERE "auths"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:28:in `logged_in_user'
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/auths_controller.rb:12:in `add_admin'
  [1m[36mAuth Create (3.5ms)[0m  [1m[32mINSERT INTO "auths" ("email", "password_digest", "role", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["email", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["role", "admin"], ["created_at", "2024-07-31 17:34:24.015499"], ["updated_at", "2024-07-31 17:34:24.015499"]]
  ↳ app/controllers/auths_controller.rb:12:in `add_admin'
  [1m[36mTRANSACTION (1.3ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/auths_controller.rb:12:in `add_admin'
Completed 200 OK in 279ms (Views: 0.1ms | ActiveRecord: 5.3ms (3 queries, 1 cached) | GC: 0.0ms)


Started POST "/login" for ::1 at 2024-07-31 20:34:43 +0300
Processing by AuthsController#login as */*
  Parameters: {"email"=>"[FILTERED]", "password"=>"[FILTERED]"}
  [1m[36mAuth Load (0.3ms)[0m  [1m[34mSELECT "auths".* FROM "auths" WHERE "auths"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  ↳ app/controllers/auths_controller.rb:38:in `login'
Completed 200 OK in 270ms (Views: 0.3ms | ActiveRecord: 0.3ms (1 query, 0 cached) | GC: 0.0ms)


Started POST "/login" for ::1 at 2024-07-31 20:35:04 +0300
Processing by AuthsController#login as */*
  Parameters: {"email"=>"[FILTERED]", "password"=>"[FILTERED]", "role"=>"admin"}
  [1m[36mAuth Load (0.3ms)[0m  [1m[34mSELECT "auths".* FROM "auths" WHERE "auths"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  ↳ app/controllers/auths_controller.rb:38:in `login'
Completed 200 OK in 2ms (Views: 0.1ms | ActiveRecord: 0.3ms (1 query, 0 cached) | GC: 0.0ms)


  [1m[35m (108.2ms)[0m  [1m[35mCREATE DATABASE "wogi_app_development" ENCODING = 'unicode'[0m
  [1m[35m (39.2ms)[0m  [1m[35mCREATE DATABASE "wogi_app_test" ENCODING = 'unicode'[0m
  [1m[35m (5.1ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" character varying NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.9ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" character varying NOT NULL PRIMARY KEY, "value" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT pg_try_advisory_lock(745793581222496940)[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.5ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::InternalMetadata Create (0.5ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('environment', 'development', '2024-07-31 19:41:33.507611', '2024-07-31 19:41:33.507612') RETURNING "key"[0m
Migrating to CreateUsers (20240730191743)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (2.3ms)[0m  [1m[35mCREATE TABLE "users" ("name" character varying NOT NULL, "email" character varying NOT NULL, "user_id" uuid NOT NULL PRIMARY KEY, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (0.8ms)[0m  [1m[35mCREATE INDEX "index_users_on_user_id" ON "users" USING hash ("user_id")[0m
  [1m[35m (0.4ms)[0m  [1m[35mCREATE INDEX "index_users_on_email" ON "users" USING hash ("email")[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.2ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ('20240730191743') RETURNING "version"[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT[0m
Migrating to CreateProducts (20240730192347)
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (1.7ms)[0m  [1m[35mCREATE TABLE "products" ("name" character varying NOT NULL, "state" character varying NOT NULL, "description" character varying NOT NULL, "product_id" uuid NOT NULL PRIMARY KEY, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (0.4ms)[0m  [1m[35mCREATE INDEX "index_products_on_product_id" ON "products" USING hash ("product_id")[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.1ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ('20240730192347') RETURNING "version"[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT[0m
Migrating to CreateBrands (20240730192942)
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (1.6ms)[0m  [1m[35mCREATE TABLE "brands" ("name" character varying NOT NULL, "state" character varying NOT NULL, "brand_id" uuid NOT NULL PRIMARY KEY, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE INDEX "index_brands_on_brand_id" ON "brands" USING hash ("brand_id")[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.1ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ('20240730192942') RETURNING "version"[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT[0m
Migrating to CreateBrandProducts (20240730194450)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (1.3ms)[0m  [1m[35mCREATE TABLE "brand_products" ("brand_id" uuid NOT NULL, "product_id" uuid NOT NULL, "connection_id" uuid NOT NULL PRIMARY KEY, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (1.9ms)[0m  [1m[35mALTER TABLE "brand_products" ADD CONSTRAINT "fk_rails_95a9b063f5"
FOREIGN KEY ("brand_id")
  REFERENCES "brands" ("brand_id")
[0m
  [1m[35m (0.6ms)[0m  [1m[35mALTER TABLE "brand_products" ADD CONSTRAINT "fk_rails_70540a0080"
FOREIGN KEY ("product_id")
  REFERENCES "products" ("product_id")
[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE INDEX "index_brand_products_on_connection_id" ON "brand_products" USING hash ("connection_id")[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.1ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ('20240730194450') RETURNING "version"[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT[0m
Migrating to CreateClientProducts (20240730194458)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (2.2ms)[0m  [1m[35mCREATE TABLE "client_products" ("client_id" uuid NOT NULL, "brand_product_id" uuid NOT NULL, "state" character varying NOT NULL, "payout_rate" float NOT NULL, "ownership_id" uuid NOT NULL PRIMARY KEY, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (0.8ms)[0m  [1m[35mALTER TABLE "client_products" ADD CONSTRAINT "fk_rails_a1ac32cba3"
FOREIGN KEY ("brand_product_id")
  REFERENCES "brand_products" ("connection_id")
[0m
  [1m[35m (0.8ms)[0m  [1m[35mALTER TABLE "client_products" ADD CONSTRAINT "fk_rails_167dcb595a"
FOREIGN KEY ("client_id")
  REFERENCES "users" ("user_id")
[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE INDEX "index_client_products_on_ownership_id" ON "client_products" USING hash ("ownership_id")[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.1ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ('20240730194458') RETURNING "version"[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT[0m
Migrating to AddTypeToUsers (20240730202256)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.5ms)[0m  [1m[35mALTER TABLE "users" ADD "type" character varying[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.1ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ('20240730202256') RETURNING "version"[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT[0m
Migrating to CreateAuths (20240731122427)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (3.0ms)[0m  [1m[35mCREATE TABLE "auths" ("id" bigserial primary key, "email" character varying, "password_digest" character varying, "role" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.1ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ('20240731122427') RETURNING "version"[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT[0m
Migrating to AddNameToAuths (20240731194123)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.6ms)[0m  [1m[35mALTER TABLE "auths" ADD "name" character varying[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.1ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ('20240731194123') RETURNING "version"[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT pg_advisory_unlock(745793581222496940)[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.7ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mAuth Create (3.3ms)[0m  [1m[32mINSERT INTO "auths" ("email", "password_digest", "role", "created_at", "updated_at", "name") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["email", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["role", "admin"], ["created_at", "2024-07-31 19:42:00.400934"], ["updated_at", "2024-07-31 19:42:00.400934"], ["name", "Admin Adminson"]]
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mCOMMIT[0m
Started POST "/login" for ::1 at 2024-07-31 22:42:52 +0300
  [1m[36mActiveRecord::SchemaMigration Load (0.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by AuthsController#login as */*
  Parameters: {"email"=>"[FILTERED]", "password"=>"[FILTERED]"}
  [1m[36mAuth Load (0.3ms)[0m  [1m[34mSELECT "auths".* FROM "auths" WHERE "auths"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  ↳ app/controllers/auths_controller.rb:38:in `login'
Completed 200 OK in 275ms (Views: 0.4ms | ActiveRecord: 11.8ms (1 query, 0 cached) | GC: 7.2ms)


Started POST "/login" for ::1 at 2024-07-31 22:53:52 +0300
  [1m[36mActiveRecord::SchemaMigration Load (1.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  
ActiveRecord::PendingMigrationError (

Migrations are pending. To resolve this issue, run:

        bin/rails db:migrate

You have 1 pending migration:

db/migrate/20240731194406_add_userid_to_auths.rb


):
  
activerecord (7.2.0.beta3) lib/active_record/migration.rb:756:in `check_pending_migrations'
activerecord (7.2.0.beta3) lib/active_record/migration.rb:663:in `block (2 levels) in call'
activesupport (7.2.0.beta3) lib/active_support/file_update_checker.rb:85:in `execute'
activerecord (7.2.0.beta3) lib/active_record/migration.rb:668:in `block in call'
activerecord (7.2.0.beta3) lib/active_record/migration.rb:660:in `synchronize'
activerecord (7.2.0.beta3) lib/active_record/migration.rb:660:in `call'
actionpack (7.2.0.beta3) lib/action_dispatch/middleware/callbacks.rb:31:in `block in call'
activesupport (7.2.0.beta3) lib/active_support/callbacks.rb:101:in `run_callbacks'
actionpack (7.2.0.beta3) lib/action_dispatch/middleware/callbacks.rb:30:in `call'
actionpack (7.2.0.beta3) lib/action_dispatch/middleware/executor.rb:16:in `call'
actionpack (7.2.0.beta3) lib/action_dispatch/middleware/actionable_exceptions.rb:18:in `call'
actionpack (7.2.0.beta3) lib/action_dispatch/middleware/debug_exceptions.rb:31:in `call'
web-console (4.2.1) lib/web_console/middleware.rb:132:in `call_app'
web-console (4.2.1) lib/web_console/middleware.rb:28:in `block in call'
web-console (4.2.1) lib/web_console/middleware.rb:17:in `catch'
web-console (4.2.1) lib/web_console/middleware.rb:17:in `call'
actionpack (7.2.0.beta3) lib/action_dispatch/middleware/show_exceptions.rb:32:in `call'
railties (7.2.0.beta3) lib/rails/rack/logger.rb:41:in `call_app'
railties (7.2.0.beta3) lib/rails/rack/logger.rb:29:in `call'
sprockets-rails (3.5.1) lib/sprockets/rails/quiet_assets.rb:17:in `call'
actionpack (7.2.0.beta3) lib/action_dispatch/middleware/remote_ip.rb:96:in `call'
actionpack (7.2.0.beta3) lib/action_dispatch/middleware/request_id.rb:33:in `call'
rack (3.1.7) lib/rack/method_override.rb:28:in `call'
rack (3.1.7) lib/rack/runtime.rb:24:in `call'
activesupport (7.2.0.beta3) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (7.2.0.beta3) lib/action_dispatch/middleware/server_timing.rb:61:in `block in call'
actionpack (7.2.0.beta3) lib/action_dispatch/middleware/server_timing.rb:26:in `collect_events'
actionpack (7.2.0.beta3) lib/action_dispatch/middleware/server_timing.rb:60:in `call'
actionpack (7.2.0.beta3) lib/action_dispatch/middleware/executor.rb:16:in `call'
actionpack (7.2.0.beta3) lib/action_dispatch/middleware/static.rb:27:in `call'
rack (3.1.7) lib/rack/sendfile.rb:114:in `call'
actionpack (7.2.0.beta3) lib/action_dispatch/middleware/host_authorization.rb:143:in `call'
rack-cors (2.0.2) lib/rack/cors.rb:102:in `call'
railties (7.2.0.beta3) lib/rails/engine.rb:535:in `call'
puma (6.4.2) lib/puma/configuration.rb:272:in `call'
puma (6.4.2) lib/puma/request.rb:100:in `block in handle_request'
puma (6.4.2) lib/puma/thread_pool.rb:378:in `with_force_shutdown'
puma (6.4.2) lib/puma/request.rb:99:in `handle_request'
puma (6.4.2) lib/puma/server.rb:464:in `process_client'
puma (6.4.2) lib/puma/server.rb:245:in `block in run'
puma (6.4.2) lib/puma/thread_pool.rb:155:in `block in spawn_thread'
  [1m[35m (0.1ms)[0m  [1m[34mSELECT pg_try_advisory_lock(745793581222496940)[0m
  [1m[36mActiveRecord::SchemaMigration Load (1.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Load (1.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
Migrating to AddUseridToAuths (20240731194406)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (3.1ms)[0m  [1m[35mALTER TABLE "auths" ADD "userid" uuid[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.6ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ('20240731194406') RETURNING "version"[0m
  [1m[36mTRANSACTION (1.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT pg_advisory_unlock(745793581222496940)[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Started POST "/login" for ::1 at 2024-07-31 22:54:22 +0300
  [1m[36mActiveRecord::SchemaMigration Load (0.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by AuthsController#login as */*
  Parameters: {"email"=>"[FILTERED]", "password"=>"[FILTERED]"}
  [1m[36mAuth Load (0.4ms)[0m  [1m[34mSELECT "auths".* FROM "auths" WHERE "auths"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  ↳ app/controllers/auths_controller.rb:24:in `login'
Completed 200 OK in 267ms (Views: 0.5ms | ActiveRecord: 13.4ms (1 query, 0 cached) | GC: 0.0ms)


Started POST "/register" for ::1 at 2024-07-31 22:54:51 +0300
Processing by AuthsController#create_client as */*
  Parameters: {"email"=>"[FILTERED]", "password"=>"[FILTERED]", "role"=>"client", "name"=>"Crowley"}
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/auths_controller.rb:37:in `add_user'
  [1m[36mAuth Create (3.0ms)[0m  [1m[32mINSERT INTO "auths" ("email", "password_digest", "role", "created_at", "updated_at", "name", "userid") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["role", "client"], ["created_at", "2024-07-31 19:54:51.591294"], ["updated_at", "2024-07-31 19:54:51.591294"], ["name", "Crowley"], ["userid", nil]]
  ↳ app/controllers/auths_controller.rb:37:in `add_user'
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/auths_controller.rb:37:in `add_user'
Completed 200 OK in 270ms (Views: 0.1ms | ActiveRecord: 3.9ms (1 query, 0 cached) | GC: 0.0ms)


Started POST "/register" for ::1 at 2024-07-31 22:56:32 +0300
  [1m[36mActiveRecord::SchemaMigration Load (2.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by AuthsController#create_client as */*
  Parameters: {"email"=>"[FILTERED]", "password"=>"[FILTERED]", "role"=>"client", "name"=>"Aziraphale"}
Completed 200 OK in 0ms (Views: 0.1ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)


Started POST "/register" for ::1 at 2024-07-31 22:58:26 +0300
  [1m[36mActiveRecord::SchemaMigration Load (1.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by AuthsController#create_client as */*
  Parameters: {"email"=>"[FILTERED]", "password"=>"[FILTERED]", "role"=>"client", "name"=>"Aziraphale"}
Completed 200 OK in 0ms (Views: 0.1ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)


Started POST "/register" for ::1 at 2024-07-31 22:58:51 +0300
Processing by AuthsController#create_client as */*
  Parameters: {"email"=>"[FILTERED]", "password"=>"[FILTERED]", "role"=>"client", "name"=>"Aziraphale", "userid"=>"51fcded1-c8dc-46c5-bbb5-90a50df0a569"}
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/auths_controller.rb:32:in `add_user'
  [1m[36mAuth Create (1.9ms)[0m  [1m[32mINSERT INTO "auths" ("email", "password_digest", "role", "created_at", "updated_at", "name", "userid") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["role", "client"], ["created_at", "2024-07-31 19:58:52.069538"], ["updated_at", "2024-07-31 19:58:52.069538"], ["name", "Aziraphale"], ["userid", "51fcded1-c8dc-46c5-bbb5-90a50df0a569"]]
  ↳ app/controllers/auths_controller.rb:32:in `add_user'
  [1m[36mTRANSACTION (0.9ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/auths_controller.rb:32:in `add_user'
Completed 200 OK in 308ms (Views: 0.2ms | ActiveRecord: 19.8ms (1 query, 0 cached) | GC: 0.0ms)


Started POST "/login" for ::1 at 2024-07-31 22:59:07 +0300
Processing by AuthsController#login as */*
  Parameters: {"email"=>"[FILTERED]", "password"=>"[FILTERED]"}
  [1m[36mAuth Load (0.4ms)[0m  [1m[34mSELECT "auths".* FROM "auths" WHERE "auths"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  ↳ app/controllers/auths_controller.rb:16:in `login'
Completed 200 OK in 274ms (Views: 0.4ms | ActiveRecord: 0.5ms (1 query, 0 cached) | GC: 0.0ms)


Started POST "/register_admin" for ::1 at 2024-07-31 23:00:12 +0300
Processing by AuthsController#add_admin as */*
  Parameters: {"email"=>"[FILTERED]", "password"=>"[FILTERED]", "role"=>"client", "name"=>"Aziraphale", "userid"=>"7bac3a09-79d0-4a58-933a-9597f3475da3"}
  [1m[36mAuth Load (4.5ms)[0m  [1m[34mSELECT "auths".* FROM "auths" WHERE "auths"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:28:in `logged_in_user'
  [1m[36mCACHE Auth Load (0.0ms)[0m  [1m[34mSELECT "auths".* FROM "auths" WHERE "auths"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:28:in `logged_in_user'
Completed 200 OK in 26ms (Views: 0.6ms | ActiveRecord: 4.5ms (2 queries, 1 cached) | GC: 0.0ms)


Started POST "/register_admin" for ::1 at 2024-07-31 23:00:18 +0300
Processing by AuthsController#add_admin as */*
  Parameters: {"email"=>"[FILTERED]", "password"=>"[FILTERED]", "role"=>"admin", "name"=>"Aziraphale", "userid"=>"7bac3a09-79d0-4a58-933a-9597f3475da3"}
  [1m[36mAuth Load (1.2ms)[0m  [1m[34mSELECT "auths".* FROM "auths" WHERE "auths"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:28:in `logged_in_user'
  [1m[36mCACHE Auth Load (0.0ms)[0m  [1m[34mSELECT "auths".* FROM "auths" WHERE "auths"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:28:in `logged_in_user'
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/auths_controller.rb:32:in `add_user'
  [1m[36mAuth Create (19.7ms)[0m  [1m[32mINSERT INTO "auths" ("email", "password_digest", "role", "created_at", "updated_at", "name", "userid") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["role", "admin"], ["created_at", "2024-07-31 20:00:19.132734"], ["updated_at", "2024-07-31 20:00:19.132734"], ["name", "Aziraphale"], ["userid", "7bac3a09-79d0-4a58-933a-9597f3475da3"]]
  ↳ app/controllers/auths_controller.rb:32:in `add_user'
  [1m[36mTRANSACTION (1.4ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/auths_controller.rb:32:in `add_user'
Completed 200 OK in 302ms (Views: 0.4ms | ActiveRecord: 22.9ms (3 queries, 1 cached) | GC: 0.0ms)


  [1m[35m (0.1ms)[0m  [1m[34mSELECT pg_try_advisory_lock(745793581222496940)[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.3ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
Migrating to AddIndexToAuth (20240731200119)
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (3.5ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_auths_on_userid" ON "auths" ("userid")[0m
  [1m[35m (0.4ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_auths_on_email" ON "auths" ("email")[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.1ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ('20240731200119') RETURNING "version"[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT pg_advisory_unlock(745793581222496940)[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Started POST "/register_admin" for ::1 at 2024-07-31 23:02:48 +0300
  [1m[36mActiveRecord::SchemaMigration Load (0.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by AuthsController#add_admin as */*
  Parameters: {"email"=>"[FILTERED]", "password"=>"[FILTERED]", "role"=>"admin", "name"=>"Aziraphale", "userid"=>"7bac3a09-79d0-4a58-933a-9597f3475da3"}
  [1m[36mAuth Load (1.2ms)[0m  [1m[34mSELECT "auths".* FROM "auths" WHERE "auths"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:28:in `logged_in_user'
  [1m[36mCACHE Auth Load (0.0ms)[0m  [1m[34mSELECT "auths".* FROM "auths" WHERE "auths"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:28:in `logged_in_user'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/auths_controller.rb:32:in `add_user'
  [1m[36mAuth Create (3.2ms)[0m  [1m[32mINSERT INTO "auths" ("email", "password_digest", "role", "created_at", "updated_at", "name", "userid") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["role", "admin"], ["created_at", "2024-07-31 20:02:49.177404"], ["updated_at", "2024-07-31 20:02:49.177404"], ["name", "Aziraphale"], ["userid", "7bac3a09-79d0-4a58-933a-9597f3475da3"]]
  ↳ app/controllers/auths_controller.rb:32:in `add_user'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  ↳ app/controllers/auths_controller.rb:32:in `add_user'
Completed 500 Internal Server Error in 270ms (ActiveRecord: 16.8ms (3 queries, 1 cached) | GC: 0.0ms)


  
ActiveRecord::RecordNotUnique (PG::UniqueViolation: ERROR:  duplicate key value violates unique constraint "index_auths_on_userid"
DETAIL:  Key (userid)=(7bac3a09-79d0-4a58-933a-9597f3475da3) already exists.
):

Causes:
PG::UniqueViolation (ERROR:  duplicate key value violates unique constraint "index_auths_on_userid"
DETAIL:  Key (userid)=(7bac3a09-79d0-4a58-933a-9597f3475da3) already exists.
)
  
Started POST "/register_admin" for ::1 at 2024-07-31 23:03:00 +0300
Processing by AuthsController#add_admin as */*
  Parameters: {"email"=>"[FILTERED]", "password"=>"[FILTERED]", "role"=>"admin", "name"=>"Aziraphale", "userid"=>"7bac3a09-79d0-4a58-933a-9597f3475da2"}
  [1m[36mAuth Load (0.3ms)[0m  [1m[34mSELECT "auths".* FROM "auths" WHERE "auths"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:28:in `logged_in_user'
  [1m[36mCACHE Auth Load (0.0ms)[0m  [1m[34mSELECT "auths".* FROM "auths" WHERE "auths"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:28:in `logged_in_user'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/auths_controller.rb:32:in `add_user'
  [1m[36mAuth Create (2.3ms)[0m  [1m[32mINSERT INTO "auths" ("email", "password_digest", "role", "created_at", "updated_at", "name", "userid") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["role", "admin"], ["created_at", "2024-07-31 20:03:01.274438"], ["updated_at", "2024-07-31 20:03:01.274438"], ["name", "Aziraphale"], ["userid", "7bac3a09-79d0-4a58-933a-9597f3475da2"]]
  ↳ app/controllers/auths_controller.rb:32:in `add_user'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  ↳ app/controllers/auths_controller.rb:32:in `add_user'
Completed 500 Internal Server Error in 276ms (ActiveRecord: 2.9ms (3 queries, 1 cached) | GC: 0.0ms)


  
ActiveRecord::RecordNotUnique (PG::UniqueViolation: ERROR:  duplicate key value violates unique constraint "index_auths_on_email"
DETAIL:  Key (email)=(admin1@email.com) already exists.
):

Causes:
PG::UniqueViolation (ERROR:  duplicate key value violates unique constraint "index_auths_on_email"
DETAIL:  Key (email)=(admin1@email.com) already exists.
)
  
Started POST "/register_admin" for ::1 at 2024-07-31 23:03:10 +0300
Processing by AuthsController#add_admin as */*
  Parameters: {"email"=>"[FILTERED]", "password"=>"[FILTERED]", "role"=>"admin", "name"=>"Aziraphale", "userid"=>"7bac3a09-79d0-4a58-933a-9597f3475da1"}
  [1m[36mAuth Load (0.3ms)[0m  [1m[34mSELECT "auths".* FROM "auths" WHERE "auths"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:28:in `logged_in_user'
  [1m[36mCACHE Auth Load (0.0ms)[0m  [1m[34mSELECT "auths".* FROM "auths" WHERE "auths"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:28:in `logged_in_user'
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/auths_controller.rb:32:in `add_user'
  [1m[36mAuth Create (1.8ms)[0m  [1m[32mINSERT INTO "auths" ("email", "password_digest", "role", "created_at", "updated_at", "name", "userid") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["role", "admin"], ["created_at", "2024-07-31 20:03:10.489778"], ["updated_at", "2024-07-31 20:03:10.489778"], ["name", "Aziraphale"], ["userid", "7bac3a09-79d0-4a58-933a-9597f3475da1"]]
  ↳ app/controllers/auths_controller.rb:32:in `add_user'
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/auths_controller.rb:32:in `add_user'
Completed 200 OK in 272ms (Views: 0.3ms | ActiveRecord: 3.2ms (3 queries, 1 cached) | GC: 0.1ms)


Started POST "/register_admin" for ::1 at 2024-07-31 23:04:27 +0300
  [1m[36mActiveRecord::SchemaMigration Load (0.7ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by AuthsController#add_admin as */*
  Parameters: {"email"=>"[FILTERED]", "password"=>"[FILTERED]", "role"=>"admin", "name"=>"Aziraphale"}
  [1m[36mAuth Load (0.7ms)[0m  [1m[34mSELECT "auths".* FROM "auths" WHERE "auths"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:28:in `logged_in_user'
  [1m[36mCACHE Auth Load (0.0ms)[0m  [1m[34mSELECT "auths".* FROM "auths" WHERE "auths"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:28:in `logged_in_user'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/auths_controller.rb:32:in `add_user'
  [1m[36mAuth Create (2.2ms)[0m  [1m[32mINSERT INTO "auths" ("email", "password_digest", "role", "created_at", "updated_at", "name", "userid") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["role", "admin"], ["created_at", "2024-07-31 20:04:27.939857"], ["updated_at", "2024-07-31 20:04:27.939857"], ["name", "Aziraphale"], ["userid", nil]]
  ↳ app/controllers/auths_controller.rb:32:in `add_user'
  [1m[36mTRANSACTION (0.9ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/auths_controller.rb:32:in `add_user'
Completed 200 OK in 268ms (Views: 0.2ms | ActiveRecord: 16.9ms (3 queries, 1 cached) | GC: 0.0ms)


  [1m[35m (0.3ms)[0m  [1m[34mSELECT pg_try_advisory_lock(745793581222496940)[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.7ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.7ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[35m (0.1ms)[0m  [1m[34mSELECT pg_advisory_unlock(745793581222496940)[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (107.4ms)[0m  [1m[35mCREATE DATABASE "wogi_app_development" ENCODING = 'unicode'[0m
  [1m[35m (41.6ms)[0m  [1m[35mCREATE DATABASE "wogi_app_test" ENCODING = 'unicode'[0m
  [1m[35m (6.8ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" character varying NOT NULL PRIMARY KEY)[0m
  [1m[35m (2.5ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" character varying NOT NULL PRIMARY KEY, "value" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT pg_try_advisory_lock(745793581222496940)[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.6ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[36mActiveRecord::InternalMetadata Create (0.4ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ('environment', 'development', '2024-07-31 20:06:24.475964', '2024-07-31 20:06:24.475966') RETURNING "key"[0m
Migrating to CreateAuths (20240731122427)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (3.7ms)[0m  [1m[35mCREATE TABLE "auths" ("id" bigserial primary key, "email" character varying, "password_digest" character varying, "role" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.2ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ('20240731122427') RETURNING "version"[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT[0m
Migrating to AddNameToAuths (20240731194123)
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.8ms)[0m  [1m[35mALTER TABLE "auths" ADD "name" character varying[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.1ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ('20240731194123') RETURNING "version"[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT[0m
Migrating to AddUseridToAuths (20240731194406)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "auths" ADD "userid" uuid[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.1ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ('20240731194406') RETURNING "version"[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT[0m
Migrating to AddIndexToAuth (20240731200119)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (1.2ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_auths_on_userid" ON "auths" ("userid")[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_auths_on_email" ON "auths" ("email")[0m
  [1m[35m (0.1ms)[0m  [1m[35mALTER TABLE "auths" ALTER COLUMN "userid" SET NOT NULL[0m
  [1m[35m (0.1ms)[0m  [1m[35mALTER TABLE "auths" ALTER COLUMN "email" SET NOT NULL[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.1ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ('20240731200119') RETURNING "version"[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT pg_advisory_unlock(745793581222496940)[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.9ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mAuth Create (2.5ms)[0m  [1m[32mINSERT INTO "auths" ("email", "password_digest", "role", "created_at", "updated_at", "name", "userid") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["role", "admin"], ["created_at", "2024-07-31 20:06:26.899303"], ["updated_at", "2024-07-31 20:06:26.899303"], ["name", "Admin Adminson"], ["userid", nil]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.8ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mAuth Create (3.8ms)[0m  [1m[32mINSERT INTO "auths" ("email", "password_digest", "role", "created_at", "updated_at", "name", "userid") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["email", "[FILTERED]"], ["password_digest", "[FILTERED]"], ["role", "admin"], ["created_at", "2024-07-31 20:06:52.059537"], ["updated_at", "2024-07-31 20:06:52.059537"], ["name", "Admin Adminson"], ["userid", "7bac3a09-79d0-4a58-933a-9597f3475da3"]]
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT pg_try_advisory_lock(745793581222496940)[0m
  [1m[36mActiveRecord::SchemaMigration Load (1.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.6ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
Migrating to CreateBrands (20240731201739)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT pg_advisory_unlock(745793581222496940)[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT pg_try_advisory_lock(745793581222496940)[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.9ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Load (1.1ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
Migrating to CreateBrands (20240731201739)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (9.7ms)[0m  [1m[35mCREATE TABLE "brands" ("name" character varying NOT NULL, "state" character varying NOT NULL, "brand_id" uuid NOT NULL PRIMARY KEY, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.5ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ('20240731201739') RETURNING "version"[0m
  [1m[36mTRANSACTION (1.2ms)[0m  [1m[35mCOMMIT[0m
Migrating to CreateProducts (20240731201914)
  [1m[35m (0.1ms)[0m  [1m[34mSELECT pg_advisory_unlock(745793581222496940)[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT pg_try_advisory_lock(745793581222496940)[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.9ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Load (1.0ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
Migrating to CreateProducts (20240731201914)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (6.0ms)[0m  [1m[35mCREATE TABLE "products" ("name" character varying NOT NULL, "description" character varying, "state" character varying NOT NULL, "product_id" uuid NOT NULL PRIMARY KEY, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.2ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ('20240731201914') RETURNING "version"[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[35mCOMMIT[0m
Migrating to CreateBrandOwnerships (20240731202138)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (2.0ms)[0m  [1m[35mCREATE TABLE "brand_ownerships" ("brand_id" uuid NOT NULL, "product_id" uuid NOT NULL, "conn_id" uuid NOT NULL PRIMARY KEY, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.1ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ('20240731202138') RETURNING "version"[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT[0m
Migrating to CreateClientProducts (20240731202655)
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (4.2ms)[0m  [1m[35mCREATE TABLE "client_products" ("state" character varying NOT NULL, "prod_id" uuid NOT NULL, "payout_rate" float NOT NULL, "client_id" uuid NOT NULL, "conn_id" uuid NOT NULL PRIMARY KEY, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.1ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ('20240731202655') RETURNING "version"[0m
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT pg_advisory_unlock(745793581222496940)[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT pg_try_advisory_lock(745793581222496940)[0m
  [1m[36mActiveRecord::SchemaMigration Load (1.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Load (1.0ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
Migrating to AddConstraintsAndIndexes (20240731203136)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (3.3ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_brands_on_brand_id" ON "brands" ("brand_id")[0m
  [1m[35m (1.3ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_brands_on_name" ON "brands" ("name")[0m
  [1m[35m (1.2ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_products_on_product_id" ON "products" ("product_id")[0m
  [1m[35m (1.0ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_products_on_name" ON "products" ("name")[0m
  [1m[35m (1.1ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_brand_ownerships_on_conn_id" ON "brand_ownerships" ("conn_id")[0m
  [1m[35m (2.5ms)[0m  [1m[35mALTER TABLE "brand_ownerhips" ADD CONSTRAINT "fk_rails_df263521c9"
FOREIGN KEY ("brand_id")
  REFERENCES "brands" ("brand_id")
[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT pg_advisory_unlock(745793581222496940)[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT pg_try_advisory_lock(745793581222496940)[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.7ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.7ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
Migrating to AddConstraintsAndIndexes (20240731203136)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (2.7ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_brands_on_brand_id" ON "brands" ("brand_id")[0m
  [1m[35m (1.2ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_brands_on_name" ON "brands" ("name")[0m
  [1m[35m (1.0ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_products_on_product_id" ON "products" ("product_id")[0m
  [1m[35m (0.9ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_products_on_name" ON "products" ("name")[0m
  [1m[35m (0.8ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_brand_ownerships_on_conn_id" ON "brand_ownerships" ("conn_id")[0m
  [1m[35m (6.3ms)[0m  [1m[35mALTER TABLE "brand_ownerships" ADD CONSTRAINT "fk_rails_6c753c3356"
FOREIGN KEY ("brand_id")
  REFERENCES "brands" ("brand_id")
[0m
  [1m[35m (0.8ms)[0m  [1m[35mALTER TABLE "brand_ownerships" ADD CONSTRAINT "fk_rails_8b8812bf5d"
FOREIGN KEY ("product_id")
  REFERENCES "products" ("product_id")
[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE UNIQUE INDEX "index_client_products_on_conn_id" ON "client_products" ("conn_id")[0m
  [1m[35m (1.1ms)[0m  [1m[35mALTER TABLE "client_products" ADD CONSTRAINT "fk_rails_167dcb595a"
FOREIGN KEY ("client_id")
  REFERENCES "auths" ("userid")
[0m
  [1m[35m (0.5ms)[0m  [1m[35mALTER TABLE "client_products" ADD CONSTRAINT "fk_rails_a3c075b4a0"
FOREIGN KEY ("prod_id")
  REFERENCES "brand_ownerships" ("conn_id")
[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.2ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ('20240731203136') RETURNING "version"[0m
  [1m[36mTRANSACTION (1.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT pg_advisory_unlock(745793581222496940)[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT pg_try_advisory_lock(745793581222496940)[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.7ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.7ms)[0m  [1m[34mSELECT * FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 ORDER BY "ar_internal_metadata"."key" ASC LIMIT 1[0m  [[nil, "environment"]]
  [1m[35m (0.1ms)[0m  [1m[34mSELECT pg_advisory_unlock(745793581222496940)[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Started POST "/login" for ::1 at 2024-07-31 23:44:19 +0300
  [1m[36mActiveRecord::SchemaMigration Load (1.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by AuthsController#login as */*
  Parameters: {"email"=>"[FILTERED]", "password"=>"[FILTERED]"}
  [1m[36mAuth Load (0.7ms)[0m  [1m[34mSELECT "auths".* FROM "auths" WHERE "auths"."email" = $1 LIMIT $2[0m  [["email", "[FILTERED]"], ["LIMIT", 1]]
  ↳ app/controllers/auths_controller.rb:16:in `login'
Completed 200 OK in 269ms (Views: 0.3ms | ActiveRecord: 14.9ms (1 query, 0 cached) | GC: 0.0ms)


Started POST "/brands_register" for ::1 at 2024-07-31 23:45:24 +0300
  
ActionController::RoutingError (No route matches [POST] "/brands_register"):
  
Started POST "/brands/register" for ::1 at 2024-07-31 23:45:34 +0300
Processing by BrandsController#register as */*
  Parameters: {"name"=>"Aziraphale", "brand_id"=>"55a5978a-edb8-44b5-8081-60e1cf544fb4", "state"=>"registered"}
  [1m[36mAuth Load (0.4ms)[0m  [1m[34mSELECT "auths".* FROM "auths" WHERE "auths"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:28:in `logged_in_user'
  [1m[36mCACHE Auth Load (0.0ms)[0m  [1m[34mSELECT "auths".* FROM "auths" WHERE "auths"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:28:in `logged_in_user'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/brands_controller.rb:5:in `register'
  [1m[36mBrand Create (5.0ms)[0m  [1m[32mINSERT INTO "brands" ("name", "state", "brand_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "brand_id"[0m  [["name", "Aziraphale"], ["state", "registered"], ["brand_id", "55a5978a-edb8-44b5-8081-60e1cf544fb4"], ["created_at", "2024-07-31 20:45:35.001603"], ["updated_at", "2024-07-31 20:45:35.001603"]]
  ↳ app/controllers/brands_controller.rb:5:in `register'
  [1m[36mTRANSACTION (1.0ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/brands_controller.rb:5:in `register'
Completed 500 Internal Server Error in 23ms (ActiveRecord: 9.5ms (3 queries, 1 cached) | GC: 1.3ms)


  
NameError (undefined local variable or method `token' for an instance of BrandsController):
  
app/controllers/brands_controller.rb:7:in `register'
Started POST "/brands/register" for ::1 at 2024-07-31 23:46:00 +0300
  [1m[36mActiveRecord::SchemaMigration Load (1.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by BrandsController#register as */*
  Parameters: {"name"=>"Aziraphale", "brand_id"=>"55a5978a-edb8-44b5-8081-60e1cf544fb4", "state"=>"registered"}
  [1m[36mAuth Load (0.4ms)[0m  [1m[34mSELECT "auths".* FROM "auths" WHERE "auths"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:28:in `logged_in_user'
  [1m[36mCACHE Auth Load (0.0ms)[0m  [1m[34mSELECT "auths".* FROM "auths" WHERE "auths"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:28:in `logged_in_user'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/brands_controller.rb:5:in `register'
  [1m[36mBrand Create (1.8ms)[0m  [1m[32mINSERT INTO "brands" ("name", "state", "brand_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "brand_id"[0m  [["name", "Aziraphale"], ["state", "registered"], ["brand_id", "55a5978a-edb8-44b5-8081-60e1cf544fb4"], ["created_at", "2024-07-31 20:46:00.424507"], ["updated_at", "2024-07-31 20:46:00.424507"]]
  ↳ app/controllers/brands_controller.rb:5:in `register'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mROLLBACK[0m
  ↳ app/controllers/brands_controller.rb:5:in `register'
Completed 500 Internal Server Error in 31ms (ActiveRecord: 15.3ms (3 queries, 1 cached) | GC: 0.0ms)


  
ActiveRecord::RecordNotUnique (PG::UniqueViolation: ERROR:  duplicate key value violates unique constraint "brands_pkey"
DETAIL:  Key (brand_id)=(55a5978a-edb8-44b5-8081-60e1cf544fb4) already exists.
):

Causes:
PG::UniqueViolation (ERROR:  duplicate key value violates unique constraint "brands_pkey"
DETAIL:  Key (brand_id)=(55a5978a-edb8-44b5-8081-60e1cf544fb4) already exists.
)
  
Started POST "/brands/register" for ::1 at 2024-07-31 23:46:42 +0300
Processing by BrandsController#register as */*
  Parameters: {"name"=>"Aziraphale1", "brand_id"=>"55a5978a-edb8-44b5-8081-60e1cf544fb3", "state"=>"registered"}
Filter chain halted as :authorized rendered or redirected
Completed 401 Unauthorized in 2ms (Views: 0.5ms | ActiveRecord: 0.0ms (0 queries, 0 cached) | GC: 0.0ms)


Started POST "/brands/register" for ::1 at 2024-07-31 23:46:49 +0300
Processing by BrandsController#register as */*
  Parameters: {"name"=>"Aziraphale1", "brand_id"=>"55a5978a-edb8-44b5-8081-60e1cf544fb3", "state"=>"registered"}
  [1m[36mAuth Load (0.6ms)[0m  [1m[34mSELECT "auths".* FROM "auths" WHERE "auths"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:28:in `logged_in_user'
  [1m[36mCACHE Auth Load (0.0ms)[0m  [1m[34mSELECT "auths".* FROM "auths" WHERE "auths"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:28:in `logged_in_user'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/brands_controller.rb:5:in `register'
  [1m[36mBrand Create (1.3ms)[0m  [1m[32mINSERT INTO "brands" ("name", "state", "brand_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "brand_id"[0m  [["name", "Aziraphale1"], ["state", "registered"], ["brand_id", "55a5978a-edb8-44b5-8081-60e1cf544fb3"], ["created_at", "2024-07-31 20:46:49.578443"], ["updated_at", "2024-07-31 20:46:49.578443"]]
  ↳ app/controllers/brands_controller.rb:5:in `register'
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/brands_controller.rb:5:in `register'
Completed 200 OK in 10ms (Views: 0.4ms | ActiveRecord: 2.7ms (3 queries, 1 cached) | GC: 0.0ms)


Started POST "/products/register" for ::1 at 2024-07-31 23:50:39 +0300
Processing by ProductsController#register as */*
  Parameters: {"name"=>"Aziraphale1", "product"=>"55a5978a-edb8-44b5-8081-60e1cf544fb3", "state"=>"registered"}
  [1m[36mAuth Load (0.4ms)[0m  [1m[34mSELECT "auths".* FROM "auths" WHERE "auths"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:28:in `logged_in_user'
  [1m[36mCACHE Auth Load (0.0ms)[0m  [1m[34mSELECT "auths".* FROM "auths" WHERE "auths"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:28:in `logged_in_user'
[31mUnpermitted parameter: :product. Context: { controller: ProductsController, action: register, request: #<ActionDispatch::Request:0x00000001217988e0>, params: {"name"=>"Aziraphale1", "product"=>"55a5978a-edb8-44b5-8081-60e1cf544fb3", "state"=>"registered", "controller"=>"products", "action"=>"register"} }[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/products_controller.rb:5:in `register'
  [1m[36mProduct Create (2.4ms)[0m  [1m[32mINSERT INTO "products" ("name", "description", "state", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "product_id"[0m  [["name", "Aziraphale1"], ["description", nil], ["state", "registered"], ["created_at", "2024-07-31 20:50:39.126889"], ["updated_at", "2024-07-31 20:50:39.126889"]]
  ↳ app/controllers/products_controller.rb:5:in `register'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mROLLBACK[0m
  ↳ app/controllers/products_controller.rb:5:in `register'
Completed 500 Internal Server Error in 34ms (ActiveRecord: 14.2ms (3 queries, 1 cached) | GC: 6.9ms)


  
ActiveRecord::NotNullViolation (PG::NotNullViolation: ERROR:  null value in column "product_id" of relation "products" violates not-null constraint
DETAIL:  Failing row contains (Aziraphale1, null, registered, null, 2024-07-31 20:50:39.126889, 2024-07-31 20:50:39.126889).
):

Causes:
PG::NotNullViolation (ERROR:  null value in column "product_id" of relation "products" violates not-null constraint
DETAIL:  Failing row contains (Aziraphale1, null, registered, null, 2024-07-31 20:50:39.126889, 2024-07-31 20:50:39.126889).
)
  
Started POST "/products/register" for ::1 at 2024-07-31 23:50:51 +0300
Processing by ProductsController#register as */*
  Parameters: {"name"=>"Aziraphale1", "product_id"=>"55a5978a-edb8-44b5-8081-60e1cf544fb3", "state"=>"registered"}
  [1m[36mAuth Load (0.3ms)[0m  [1m[34mSELECT "auths".* FROM "auths" WHERE "auths"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:28:in `logged_in_user'
  [1m[36mCACHE Auth Load (0.0ms)[0m  [1m[34mSELECT "auths".* FROM "auths" WHERE "auths"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:28:in `logged_in_user'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/products_controller.rb:5:in `register'
  [1m[36mProduct Create (2.8ms)[0m  [1m[32mINSERT INTO "products" ("name", "description", "state", "product_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "product_id"[0m  [["name", "Aziraphale1"], ["description", nil], ["state", "registered"], ["product_id", "55a5978a-edb8-44b5-8081-60e1cf544fb3"], ["created_at", "2024-07-31 20:50:51.511787"], ["updated_at", "2024-07-31 20:50:51.511787"]]
  ↳ app/controllers/products_controller.rb:5:in `register'
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/products_controller.rb:5:in `register'
Completed 200 OK in 8ms (Views: 0.3ms | ActiveRecord: 3.8ms (3 queries, 1 cached) | GC: 0.0ms)


Started POST "/brands/add_product" for ::1 at 2024-07-31 23:54:28 +0300
  
AbstractController::ActionNotFound (The action 'add_product' could not be found for BrandsController):
  
actionpack (7.2.0.beta3) lib/abstract_controller/base.rb:158:in `process'
actionview (7.2.0.beta3) lib/action_view/rendering.rb:40:in `process'
actionpack (7.2.0.beta3) lib/action_controller/metal.rb:252:in `dispatch'
actionpack (7.2.0.beta3) lib/action_controller/metal.rb:335:in `dispatch'
actionpack (7.2.0.beta3) lib/action_dispatch/routing/route_set.rb:67:in `dispatch'
actionpack (7.2.0.beta3) lib/action_dispatch/routing/route_set.rb:50:in `serve'
actionpack (7.2.0.beta3) lib/action_dispatch/journey/router.rb:53:in `block in serve'
actionpack (7.2.0.beta3) lib/action_dispatch/journey/router.rb:133:in `block in find_routes'
actionpack (7.2.0.beta3) lib/action_dispatch/journey/router.rb:126:in `each'
actionpack (7.2.0.beta3) lib/action_dispatch/journey/router.rb:126:in `find_routes'
actionpack (7.2.0.beta3) lib/action_dispatch/journey/router.rb:34:in `serve'
actionpack (7.2.0.beta3) lib/action_dispatch/routing/route_set.rb:896:in `call'
rack (3.1.7) lib/rack/tempfile_reaper.rb:20:in `call'
rack (3.1.7) lib/rack/etag.rb:29:in `call'
rack (3.1.7) lib/rack/conditional_get.rb:43:in `call'
rack (3.1.7) lib/rack/head.rb:15:in `call'
actionpack (7.2.0.beta3) lib/action_dispatch/http/permissions_policy.rb:38:in `call'
actionpack (7.2.0.beta3) lib/action_dispatch/http/content_security_policy.rb:36:in `call'
rack-session (2.0.0) lib/rack/session/abstract/id.rb:272:in `context'
rack-session (2.0.0) lib/rack/session/abstract/id.rb:266:in `call'
actionpack (7.2.0.beta3) lib/action_dispatch/middleware/cookies.rb:704:in `call'
activerecord (7.2.0.beta3) lib/active_record/migration.rb:674:in `call'
actionpack (7.2.0.beta3) lib/action_dispatch/middleware/callbacks.rb:31:in `block in call'
activesupport (7.2.0.beta3) lib/active_support/callbacks.rb:101:in `run_callbacks'
actionpack (7.2.0.beta3) lib/action_dispatch/middleware/callbacks.rb:30:in `call'
actionpack (7.2.0.beta3) lib/action_dispatch/middleware/executor.rb:16:in `call'
actionpack (7.2.0.beta3) lib/action_dispatch/middleware/actionable_exceptions.rb:18:in `call'
actionpack (7.2.0.beta3) lib/action_dispatch/middleware/debug_exceptions.rb:31:in `call'
web-console (4.2.1) lib/web_console/middleware.rb:132:in `call_app'
web-console (4.2.1) lib/web_console/middleware.rb:28:in `block in call'
web-console (4.2.1) lib/web_console/middleware.rb:17:in `catch'
web-console (4.2.1) lib/web_console/middleware.rb:17:in `call'
actionpack (7.2.0.beta3) lib/action_dispatch/middleware/show_exceptions.rb:32:in `call'
railties (7.2.0.beta3) lib/rails/rack/logger.rb:41:in `call_app'
railties (7.2.0.beta3) lib/rails/rack/logger.rb:29:in `call'
sprockets-rails (3.5.1) lib/sprockets/rails/quiet_assets.rb:17:in `call'
actionpack (7.2.0.beta3) lib/action_dispatch/middleware/remote_ip.rb:96:in `call'
actionpack (7.2.0.beta3) lib/action_dispatch/middleware/request_id.rb:33:in `call'
rack (3.1.7) lib/rack/method_override.rb:28:in `call'
rack (3.1.7) lib/rack/runtime.rb:24:in `call'
activesupport (7.2.0.beta3) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (7.2.0.beta3) lib/action_dispatch/middleware/server_timing.rb:61:in `block in call'
actionpack (7.2.0.beta3) lib/action_dispatch/middleware/server_timing.rb:26:in `collect_events'
actionpack (7.2.0.beta3) lib/action_dispatch/middleware/server_timing.rb:60:in `call'
actionpack (7.2.0.beta3) lib/action_dispatch/middleware/executor.rb:16:in `call'
actionpack (7.2.0.beta3) lib/action_dispatch/middleware/static.rb:27:in `call'
rack (3.1.7) lib/rack/sendfile.rb:114:in `call'
actionpack (7.2.0.beta3) lib/action_dispatch/middleware/host_authorization.rb:143:in `call'
rack-cors (2.0.2) lib/rack/cors.rb:102:in `call'
railties (7.2.0.beta3) lib/rails/engine.rb:535:in `call'
puma (6.4.2) lib/puma/configuration.rb:272:in `call'
puma (6.4.2) lib/puma/request.rb:100:in `block in handle_request'
puma (6.4.2) lib/puma/thread_pool.rb:378:in `with_force_shutdown'
puma (6.4.2) lib/puma/request.rb:99:in `handle_request'
puma (6.4.2) lib/puma/server.rb:464:in `process_client'
puma (6.4.2) lib/puma/server.rb:245:in `block in run'
puma (6.4.2) lib/puma/thread_pool.rb:155:in `block in spawn_thread'
Started POST "/brands/add_product" for ::1 at 2024-07-31 23:55:02 +0300
Processing by BrandOwnershipsController#add_product_to_brand as */*
  Parameters: {"brand_id"=>"55a5978a-edb8-44b5-8081-60e1cf544fb3", "product_id"=>"55a5978a-edb8-44b5-8081-60e1cf544fb3", "conn_id"=>"55a5978a-edb8-44b5-8081-60e1cf544fb3"}
  [1m[36mAuth Load (0.3ms)[0m  [1m[34mSELECT "auths".* FROM "auths" WHERE "auths"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:28:in `logged_in_user'
  [1m[36mCACHE Auth Load (0.0ms)[0m  [1m[34mSELECT "auths".* FROM "auths" WHERE "auths"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:28:in `logged_in_user'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/brand_ownerships_controller.rb:5:in `add_product_to_brand'
  [1m[36mBrandOwnership Create (6.0ms)[0m  [1m[32mINSERT INTO "brand_ownerships" ("brand_id", "product_id", "conn_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "conn_id"[0m  [["brand_id", "55a5978a-edb8-44b5-8081-60e1cf544fb3"], ["product_id", "55a5978a-edb8-44b5-8081-60e1cf544fb3"], ["conn_id", "55a5978a-edb8-44b5-8081-60e1cf544fb3"], ["created_at", "2024-07-31 20:55:02.983089"], ["updated_at", "2024-07-31 20:55:02.983089"]]
  ↳ app/controllers/brand_ownerships_controller.rb:5:in `add_product_to_brand'
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/brand_ownerships_controller.rb:5:in `add_product_to_brand'
Completed 200 OK in 33ms (Views: 0.1ms | ActiveRecord: 17.3ms (3 queries, 1 cached) | GC: 3.0ms)


  [1m[36mBrandOwnership Load (0.7ms)[0m  [1m[34mSELECT "brand_ownerships".* FROM "brand_ownerships" WHERE "brand_ownerships"."conn_id" = $1 LIMIT $2[0m  [["conn_id", "55a5978a-edb8-44b5-8081-60e1cf544fb3"], ["LIMIT", 1]]
Started POST "/brands/remove_product" for ::1 at 2024-08-01 00:00:32 +0300
  
ActionController::RoutingError (No route matches [POST] "/brands/remove_product"):
  
Started DELETE "/brands/remove_product" for ::1 at 2024-08-01 00:00:46 +0300
  
ActionController::RoutingError (uninitialized constant BrandOwnershipController):

Causes:
ActionDispatch::MissingController (uninitialized constant BrandOwnershipController)
NameError (uninitialized constant BrandOwnershipController)
  
Started DELETE "/brands/remove_product" for ::1 at 2024-08-01 00:01:07 +0300
Processing by BrandOwnershipsController#remove_product_from_brand as */*
  Parameters: {"conn_id"=>"55a5978a-edb8-44b5-8081-60e1cf544fb3"}
  [1m[36mAuth Load (0.8ms)[0m  [1m[34mSELECT "auths".* FROM "auths" WHERE "auths"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:28:in `logged_in_user'
  [1m[36mCACHE Auth Load (0.0ms)[0m  [1m[34mSELECT "auths".* FROM "auths" WHERE "auths"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:28:in `logged_in_user'
  [1m[36mBrandOwnership Load (0.2ms)[0m  [1m[34mSELECT "brand_ownerships".* FROM "brand_ownerships" WHERE "brand_ownerships"."conn_id" = $1 LIMIT $2[0m  [["conn_id", "55a5978a-edb8-44b5-8081-60e1cf544fb3"], ["LIMIT", 1]]
  ↳ app/controllers/brand_ownerships_controller.rb:14:in `remove_product_from_brand'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/brand_ownerships_controller.rb:18:in `remove_product_from_brand'
  [1m[36mBrandOwnership Destroy (2.5ms)[0m  [1m[31mDELETE FROM "brand_ownerships" WHERE "brand_ownerships"."conn_id" = $1[0m  [["conn_id", "55a5978a-edb8-44b5-8081-60e1cf544fb3"]]
  ↳ app/controllers/brand_ownerships_controller.rb:18:in `remove_product_from_brand'
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/brand_ownerships_controller.rb:18:in `remove_product_from_brand'
Completed 200 OK in 37ms (Views: 0.4ms | ActiveRecord: 25.8ms (4 queries, 1 cached) | GC: 0.7ms)


Started DELETE "/brands/remove_product" for ::1 at 2024-08-01 00:01:09 +0300
Processing by BrandOwnershipsController#remove_product_from_brand as */*
  Parameters: {"conn_id"=>"55a5978a-edb8-44b5-8081-60e1cf544fb3"}
  [1m[36mAuth Load (0.2ms)[0m  [1m[34mSELECT "auths".* FROM "auths" WHERE "auths"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:28:in `logged_in_user'
  [1m[36mCACHE Auth Load (0.0ms)[0m  [1m[34mSELECT "auths".* FROM "auths" WHERE "auths"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:28:in `logged_in_user'
  [1m[36mBrandOwnership Load (0.2ms)[0m  [1m[34mSELECT "brand_ownerships".* FROM "brand_ownerships" WHERE "brand_ownerships"."conn_id" = $1 LIMIT $2[0m  [["conn_id", "55a5978a-edb8-44b5-8081-60e1cf544fb3"], ["LIMIT", 1]]
  ↳ app/controllers/brand_ownerships_controller.rb:14:in `remove_product_from_brand'
Completed 404 Not Found in 4ms (ActiveRecord: 0.5ms (3 queries, 1 cached) | GC: 0.0ms)


  
ActiveRecord::RecordNotFound (Couldn't find BrandOwnership with 'conn_id'=55a5978a-edb8-44b5-8081-60e1cf544fb3):
  
app/controllers/brand_ownerships_controller.rb:14:in `remove_product_from_brand'
  [1m[36mProduct Load (1.3ms)[0m  [1m[34mSELECT "products".* FROM "products" /* loading for pp */ LIMIT $1[0m  [["LIMIT", 11]]
Started PATCH "/products/update" for ::1 at 2024-08-01 00:09:51 +0300
  
ActionController::RoutingError (uninitialized constant ProductController):

Causes:
ActionDispatch::MissingController (uninitialized constant ProductController)
NameError (uninitialized constant ProductController)
  
Started PATCH "/products/update" for ::1 at 2024-08-01 00:10:03 +0300
  
NameError (undefined local variable or method `update_product' for class ProductsController):
  
app/controllers/products_controller.rb:2:in `<class:ProductsController>'
app/controllers/products_controller.rb:1:in `<main>'
Started PATCH "/products/update" for ::1 at 2024-08-01 00:10:20 +0300
  
AbstractController::ActionNotFound (The action 'update_products' could not be found for ProductsController):
  
actionpack (7.2.0.beta3) lib/abstract_controller/base.rb:158:in `process'
actionview (7.2.0.beta3) lib/action_view/rendering.rb:40:in `process'
actionpack (7.2.0.beta3) lib/action_controller/metal.rb:252:in `dispatch'
actionpack (7.2.0.beta3) lib/action_controller/metal.rb:335:in `dispatch'
actionpack (7.2.0.beta3) lib/action_dispatch/routing/route_set.rb:67:in `dispatch'
actionpack (7.2.0.beta3) lib/action_dispatch/routing/route_set.rb:50:in `serve'
actionpack (7.2.0.beta3) lib/action_dispatch/journey/router.rb:53:in `block in serve'
actionpack (7.2.0.beta3) lib/action_dispatch/journey/router.rb:133:in `block in find_routes'
actionpack (7.2.0.beta3) lib/action_dispatch/journey/router.rb:126:in `each'
actionpack (7.2.0.beta3) lib/action_dispatch/journey/router.rb:126:in `find_routes'
actionpack (7.2.0.beta3) lib/action_dispatch/journey/router.rb:34:in `serve'
actionpack (7.2.0.beta3) lib/action_dispatch/routing/route_set.rb:896:in `call'
rack (3.1.7) lib/rack/tempfile_reaper.rb:20:in `call'
rack (3.1.7) lib/rack/etag.rb:29:in `call'
rack (3.1.7) lib/rack/conditional_get.rb:43:in `call'
rack (3.1.7) lib/rack/head.rb:15:in `call'
actionpack (7.2.0.beta3) lib/action_dispatch/http/permissions_policy.rb:38:in `call'
actionpack (7.2.0.beta3) lib/action_dispatch/http/content_security_policy.rb:36:in `call'
rack-session (2.0.0) lib/rack/session/abstract/id.rb:272:in `context'
rack-session (2.0.0) lib/rack/session/abstract/id.rb:266:in `call'
actionpack (7.2.0.beta3) lib/action_dispatch/middleware/cookies.rb:704:in `call'
activerecord (7.2.0.beta3) lib/active_record/migration.rb:674:in `call'
actionpack (7.2.0.beta3) lib/action_dispatch/middleware/callbacks.rb:31:in `block in call'
activesupport (7.2.0.beta3) lib/active_support/callbacks.rb:101:in `run_callbacks'
actionpack (7.2.0.beta3) lib/action_dispatch/middleware/callbacks.rb:30:in `call'
actionpack (7.2.0.beta3) lib/action_dispatch/middleware/executor.rb:16:in `call'
actionpack (7.2.0.beta3) lib/action_dispatch/middleware/actionable_exceptions.rb:18:in `call'
actionpack (7.2.0.beta3) lib/action_dispatch/middleware/debug_exceptions.rb:31:in `call'
web-console (4.2.1) lib/web_console/middleware.rb:132:in `call_app'
web-console (4.2.1) lib/web_console/middleware.rb:28:in `block in call'
web-console (4.2.1) lib/web_console/middleware.rb:17:in `catch'
web-console (4.2.1) lib/web_console/middleware.rb:17:in `call'
actionpack (7.2.0.beta3) lib/action_dispatch/middleware/show_exceptions.rb:32:in `call'
railties (7.2.0.beta3) lib/rails/rack/logger.rb:41:in `call_app'
railties (7.2.0.beta3) lib/rails/rack/logger.rb:29:in `call'
sprockets-rails (3.5.1) lib/sprockets/rails/quiet_assets.rb:17:in `call'
actionpack (7.2.0.beta3) lib/action_dispatch/middleware/remote_ip.rb:96:in `call'
actionpack (7.2.0.beta3) lib/action_dispatch/middleware/request_id.rb:33:in `call'
rack (3.1.7) lib/rack/method_override.rb:28:in `call'
rack (3.1.7) lib/rack/runtime.rb:24:in `call'
activesupport (7.2.0.beta3) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (7.2.0.beta3) lib/action_dispatch/middleware/server_timing.rb:61:in `block in call'
actionpack (7.2.0.beta3) lib/action_dispatch/middleware/server_timing.rb:26:in `collect_events'
actionpack (7.2.0.beta3) lib/action_dispatch/middleware/server_timing.rb:60:in `call'
actionpack (7.2.0.beta3) lib/action_dispatch/middleware/executor.rb:16:in `call'
actionpack (7.2.0.beta3) lib/action_dispatch/middleware/static.rb:27:in `call'
rack (3.1.7) lib/rack/sendfile.rb:114:in `call'
actionpack (7.2.0.beta3) lib/action_dispatch/middleware/host_authorization.rb:143:in `call'
rack-cors (2.0.2) lib/rack/cors.rb:102:in `call'
railties (7.2.0.beta3) lib/rails/engine.rb:535:in `call'
puma (6.4.2) lib/puma/configuration.rb:272:in `call'
puma (6.4.2) lib/puma/request.rb:100:in `block in handle_request'
puma (6.4.2) lib/puma/thread_pool.rb:378:in `with_force_shutdown'
puma (6.4.2) lib/puma/request.rb:99:in `handle_request'
puma (6.4.2) lib/puma/server.rb:464:in `process_client'
puma (6.4.2) lib/puma/server.rb:245:in `block in run'
puma (6.4.2) lib/puma/thread_pool.rb:155:in `block in spawn_thread'
Started PATCH "/products/update" for ::1 at 2024-08-01 00:10:43 +0300
Processing by ProductsController#update_product as */*
  Parameters: {"product_id"=>"55a5978a-edb8-44b5-8081-60e1cf544fb3", "name"=>"A. Z. Fell"}
  [1m[36mAuth Load (0.7ms)[0m  [1m[34mSELECT "auths".* FROM "auths" WHERE "auths"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:28:in `logged_in_user'
  [1m[36mCACHE Auth Load (0.0ms)[0m  [1m[34mSELECT "auths".* FROM "auths" WHERE "auths"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:28:in `logged_in_user'
  [1m[36mProduct Load (0.6ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."product_id" = $1 LIMIT $2[0m  [["product_id", "55a5978a-edb8-44b5-8081-60e1cf544fb3"], ["LIMIT", 1]]
  ↳ app/controllers/products_controller.rb:14:in `update_product'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/products_controller.rb:15:in `update_product'
  [1m[36mProduct Update (2.8ms)[0m  [1m[33mUPDATE "products" SET "name" = $1, "updated_at" = $2 WHERE "products"."product_id" = $3[0m  [["name", "A. Z. Fell"], ["updated_at", "2024-07-31 21:10:43.283125"], ["product_id", "55a5978a-edb8-44b5-8081-60e1cf544fb3"]]
  ↳ app/controllers/products_controller.rb:15:in `update_product'
  [1m[36mTRANSACTION (1.6ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/products_controller.rb:15:in `update_product'
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."product_id" = $1 LIMIT $2[0m  [["product_id", "55a5978a-edb8-44b5-8081-60e1cf544fb3"], ["LIMIT", 1]]
  ↳ app/controllers/products_controller.rb:16:in `update_product'
Completed 200 OK in 43ms (Views: 1.3ms | ActiveRecord: 18.1ms (5 queries, 1 cached) | GC: 0.0ms)


  [1m[36mProduct Load (2.8ms)[0m  [1m[34mSELECT "products".* FROM "products" /* loading for pp */ LIMIT $1[0m  [["LIMIT", 11]]
  [1m[36mBrand Load (1.4ms)[0m  [1m[34mSELECT "brands".* FROM "brands" /* loading for pp */ LIMIT $1[0m  [["LIMIT", 11]]
Started PATCH "/brands/update" for ::1 at 2024-08-01 00:12:26 +0300
Processing by BrandsController#update_brand as */*
  Parameters: {"brand_id"=>"55a5978a-edb8-44b5-8081-60e1cf544fb3", "name"=>"A. Z. Fell"}
  [1m[36mAuth Load (0.3ms)[0m  [1m[34mSELECT "auths".* FROM "auths" WHERE "auths"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:28:in `logged_in_user'
  [1m[36mCACHE Auth Load (0.0ms)[0m  [1m[34mSELECT "auths".* FROM "auths" WHERE "auths"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:28:in `logged_in_user'
Completed 500 Internal Server Error in 14ms (ActiveRecord: 9.3ms (2 queries, 1 cached) | GC: 0.2ms)


  
NameError (undefined local variable or method `product_params' for an instance of BrandsController):
  
app/controllers/brands_controller.rb:14:in `update_brand'
Started PATCH "/brands/update" for ::1 at 2024-08-01 00:12:39 +0300
Processing by BrandsController#update_brand as */*
  Parameters: {"brand_id"=>"55a5978a-edb8-44b5-8081-60e1cf544fb3", "name"=>"A. Z. Fell"}
  [1m[36mAuth Load (0.2ms)[0m  [1m[34mSELECT "auths".* FROM "auths" WHERE "auths"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:28:in `logged_in_user'
  [1m[36mCACHE Auth Load (0.0ms)[0m  [1m[34mSELECT "auths".* FROM "auths" WHERE "auths"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/controllers/application_controller.rb:28:in `logged_in_user'
  [1m[36mBrand Load (2.8ms)[0m  [1m[34mSELECT "brands".* FROM "brands" WHERE "brands"."brand_id" = $1 LIMIT $2[0m  [["brand_id", "55a5978a-edb8-44b5-8081-60e1cf544fb3"], ["LIMIT", 1]]
  ↳ app/controllers/brands_controller.rb:14:in `update_brand'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/brands_controller.rb:15:in `update_brand'
  [1m[36mBrand Update (1.0ms)[0m  [1m[33mUPDATE "brands" SET "name" = $1, "updated_at" = $2 WHERE "brands"."brand_id" = $3[0m  [["name", "A. Z. Fell"], ["updated_at", "2024-07-31 21:12:39.216702"], ["brand_id", "55a5978a-edb8-44b5-8081-60e1cf544fb3"]]
  ↳ app/controllers/brands_controller.rb:15:in `update_brand'
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/brands_controller.rb:15:in `update_brand'
  [1m[36mBrand Load (0.3ms)[0m  [1m[34mSELECT "brands".* FROM "brands" WHERE "brands"."brand_id" = $1 LIMIT $2[0m  [["brand_id", "55a5978a-edb8-44b5-8081-60e1cf544fb3"], ["LIMIT", 1]]
  ↳ app/controllers/brands_controller.rb:16:in `update_brand'
Completed 200 OK in 26ms (Views: 0.2ms | ActiveRecord: 13.9ms (5 queries, 1 cached) | GC: 0.0ms)


